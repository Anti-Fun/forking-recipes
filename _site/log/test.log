Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by HomeController#index as HTML
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" IS NULL AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  Rendered recipes/_form.html.haml (81.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by RecipesController#new as HTML
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "recipes" 
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.3ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
Completed 500 Internal Server Error in 0.1ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.2ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 1004 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  Rendered recipes/_form.html.haml (4.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#new as HTML
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" [0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 1001 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered recipes/_form.html.haml (71.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" IS NULL AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  Rendered recipes/_form.html.haml (4.4ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  Rendered recipes/show.html.haml (3.9ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.8ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 1004 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  Rendered recipes/_form.html.haml (138.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" IS NULL AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered recipes/_form.html.haml (6.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
Completed 500 Internal Server Error in 0.6ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#new as HTML
Completed 500 Internal Server Error in 0.8ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.6ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "recipes" [0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
Completed 500 Internal Server Error in 0.5ms
  [1m[35m (0.3ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.1ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 1001 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  Rendered recipes/_form.html.haml (76.2ms)
  Rendered recipes/edit.html.haml (81.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by HomeController#index as HTML
Completed 500 Internal Server Error in 0.3ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" IS NULL AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered recipes/_form.html.haml (5.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" [0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
Completed 500 Internal Server Error in 0.1ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
Completed 500 Internal Server Error in 0.1ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#new as HTML
Completed 500 Internal Server Error in 0.7ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
  [1m[35mUser Load (1.6ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Redirected to http://test.host/browse
Completed 302 Found in 21.2ms (ActiveRecord: 4.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
  [1m[35mUser Load (1.3ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Redirected to http://test.host/browse
Completed 302 Found in 19.1ms (ActiveRecord: 3.1ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 1001 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  Rendered recipes/_form.html.haml (76.8ms)
  Rendered recipes/edit.html.haml (82.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
  [1m[36mUser Load (2.7ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 39.4ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 1.9ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 1.7ms
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 1.5ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "recipes" 
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 1.6ms
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "recipes" 
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 1.8ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (0.4ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" IS NULL AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  Rendered recipes/_form.html.haml (4.2ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by HomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Redirected to http://test.host/browse
Completed 302 Found in 2.6ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  Rendered recipes/index.html.haml (1.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
  [1m[35mUser Load (1.6ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Redirected to http://test.host/browse
Completed 302 Found in 49.8ms (ActiveRecord: 3.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" IS NULL AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered recipes/_form.html.haml (80.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
Processing by RecipesController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 1.8ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[35mUser Load (1.1ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 3.3ms
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 1.6ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" [0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 1.7ms
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "recipes" [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
  [1m[35mUser Load (0.8ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 2.0ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 2.6ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 1005 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered recipes/_form.html.haml (6.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
  [1m[35mUser Load (1.5ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Redirected to http://test.host/browse
Completed 302 Found in 17.9ms (ActiveRecord: 3.1ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
  [1m[35mUser Load (1.4ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Redirected to http://test.host/browse
Completed 302 Found in 18.0ms (ActiveRecord: 3.1ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
  [1m[35mUser Load (1.5ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Redirected to http://test.host/browse
Completed 302 Found in 19.4ms (ActiveRecord: 3.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 1.9ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 1.8ms
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 2.2ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" [0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 1.4ms
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
  [1m[35mUser Load (0.8ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 2.4ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 38.1ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mActsAsTaggableOn::Tag Load (1.0ms)[0m  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" IS NULL AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  Rendered recipes/_form.html.haml (37.2ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 1005 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered recipes/_form.html.haml (4.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
  [1m[35mUser Load (1.5ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Redirected to http://test.host/browse
Completed 302 Found in 19.3ms (ActiveRecord: 4.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 1.8ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 2.5ms
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" [0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"MyString"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 1.6ms
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "recipes" [0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 1.6ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"invalid value"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 1.6ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
Processing by RecipesController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 1.8ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
  [1m[35mUser Load (1.8ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Redirected to http://test.host/browse
Completed 302 Found in 18.7ms (ActiveRecord: 4.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
Processing by HomeController#index as HTML
  [1m[35mUser Load (1.5ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Redirected to http://test.host/browse
Completed 302 Found in 16.1ms (ActiveRecord: 2.8ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (5.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Fri, 21 Mar 2014 01:07:08 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Fri, 21 Mar 2014 01:07:08 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (6.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Fri, 21 Mar 2014 01:07:09 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Fri, 21 Mar 2014 01:07:09 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (6.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Fri, 21 Mar 2014 01:07:51 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Fri, 21 Mar 2014 01:07:51 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Fri, 21 Mar 2014 01:07:51 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Fri, 21 Mar 2014 01:07:51 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (6.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Fri, 21 Mar 2014 01:08:19 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Fri, 21 Mar 2014 01:08:19 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Fri, 21 Mar 2014 01:08:19 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Fri, 21 Mar 2014 01:08:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 3[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (5.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Fri, 21 Mar 2014 01:09:53 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Fri, 21 Mar 2014 01:09:53 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Fri, 21 Mar 2014 01:09:53 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Fri, 21 Mar 2014 01:09:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 4[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Fri, 21 Mar 2014 01:09:53 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Fri, 21 Mar 2014 01:09:53 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Fri, 21 Mar 2014 01:09:53 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Fri, 21 Mar 2014 01:09:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
PG::Error: ERROR:  relation "stars" does not exist
LINE 5:              WHERE a.attrelid = '"stars"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod),
                     pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"stars"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum

  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)[0m  [["recipe_id", nil], ["user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IS NULL
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (7.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:52:49 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:52:49 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:52:50 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:52:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)[0m  [["recipe_id", 1], ["user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (7.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:53:44 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:53:44 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:53:44 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:53:44 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)[0m  [["recipe_id", 2], ["user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (2)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:53:44 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:53:44 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:53:44 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:53:44 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)  [["recipe_id", 3], ["user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (3)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (5.5ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:54:16 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:54:16 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:54:16 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:54:16 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)[0m  [["recipe_id", 4], ["user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (4)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:54:16 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:54:16 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:54:16 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:54:16 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)  [["recipe_id", 5], ["user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (5)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (7.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:56:08 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:56:08 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:56:08 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:56:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)[0m  [["recipe_id", 6], ["user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (6)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:56:08 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:56:08 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:56:08 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:56:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)  [["recipe_id", 7], ["user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (7)[0m
  [1m[35mStar Load (0.1ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" IS NULL AND "stars"."recipe_id" = 7
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (35.8ms)[0m  DELETE FROM "stars" WHERE "stars"."" = $1  [[nil, nil]]
PG::Error: ERROR:  zero-length delimited identifier at or near """"
LINE 1: DELETE FROM "stars" WHERE "stars"."" = $1
                                          ^
: DELETE FROM "stars" WHERE "stars"."" = $1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (5.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:56:46 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:56:46 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:56:47 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:56:47 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)[0m  [["recipe_id", 8], ["user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (8)
  [1m[36mStar Load (0.3ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" IS NULL AND "stars"."recipe_id" = 8[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."" = $1[0m  [[nil, nil]]
PG::Error: ERROR:  zero-length delimited identifier at or near """"
LINE 1: DELETE FROM "stars" WHERE "stars"."" = $1
                                          ^
: DELETE FROM "stars" WHERE "stars"."" = $1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:56:47 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:56:47 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.5ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:56:47 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:56:47 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)  [["recipe_id", 9], ["user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (5.6ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:57:17 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:57:17 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:57:17 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:57:17 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)[0m  [["recipe_id", 10], ["user_id", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (10)
  [1m[36mStar Load (0.2ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" IS NULL AND "stars"."recipe_id" = 10[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."" = $1[0m  [[nil, nil]]
PG::Error: ERROR:  zero-length delimited identifier at or near """"
LINE 1: DELETE FROM "stars" WHERE "stars"."" = $1
                                          ^
: DELETE FROM "stars" WHERE "stars"."" = $1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:57:17 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:57:17 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:57:17 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:57:17 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)  [["recipe_id", 11], ["user_id", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" IS NULL
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (11)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (6.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:57:47 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:57:47 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:57:47 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:57:47 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:57:47 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:57:47 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:57:47 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:57:47 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (9.2ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:58:17 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:58:17 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:58:17 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:58:17 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:58:17 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:58:17 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:58:17 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:58:17 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (5.5ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$K5c9oBznUzrZ0ynY3Ly/wOiQAXQXYaMt1Hq0x5cEA3w8ECv3kR7p6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)[0m  [["recipe_id", 16], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (16)
  [1m[36mStar Load (0.2ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 1 AND "stars"."recipe_id" = 16[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."" = $1[0m  [[nil, nil]]
PG::Error: ERROR:  zero-length delimited identifier at or near """"
LINE 1: DELETE FROM "stars" WHERE "stars"."" = $1
                                          ^
: DELETE FROM "stars" WHERE "stars"."" = $1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 17 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 17 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00], ["searchable_id", 17], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$/rXt7B41xe82yWaHEbyBU.Jw582BlQnTzf6boexrmb8qdqFI5RBDm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:58:34 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)  [["recipe_id", 17], ["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (17)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (7.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 18 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 18 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00], ["searchable_id", 18], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$Px0Sxf/gybHDIq6hdQ3W6OFm3uIrcqaPVA62GuWzlWJoD5WJIADHK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)[0m  [["recipe_id", 18], ["user_id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (18)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 19 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 19 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00], ["searchable_id", 19], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$AzOdyBbTOVq.AzOt3APCpOo89yntNv21N8TYEpCuFDpcLJwtERsN6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 01:59:21 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)  [["recipe_id", 19], ["user_id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (19)[0m
  [1m[35mStar Load (0.1ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 4 AND "stars"."recipe_id" = 19 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "stars" WHERE "stars"."" = $1  [[nil, nil]]
PG::Error: ERROR:  zero-length delimited identifier at or near """"
LINE 1: DELETE FROM "stars" WHERE "stars"."" = $1
                                          ^
: DELETE FROM "stars" WHERE "stars"."" = $1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (6.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 20 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 20 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00], ["searchable_id", 20], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$uqXDHDncuk59W.Cxv7G78uTWr5p8vbuKp.zuxRSN5hPvNvsi6D81."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)[0m  [["recipe_id", 20], ["user_id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 5[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (20)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 21 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 21 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00], ["searchable_id", 21], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$0/cpjAwcopT7NSvNipsap.lT8x0zmsbGICy5dpgpS/jxDPoSMwV5u"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:02:36 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2)  [["recipe_id", 21], ["user_id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 6
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (21)[0m
  [1m[35mStar Load (0.1ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 6 AND "stars"."recipe_id" = 21 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "stars" WHERE "stars"."" = $1  [[nil, nil]]
PG::Error: ERROR:  zero-length delimited identifier at or near """"
LINE 1: DELETE FROM "stars" WHERE "stars"."" = $1
                                          ^
: DELETE FROM "stars" WHERE "stars"."" = $1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (6.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 22 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 22 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00], ["searchable_id", 22], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$GtuGFMrFFbH.rqDkUpdysec1YexyOn4ZgEgY6z42kW9c.qX3GfSCu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"[0m  [["recipe_id", 22], ["user_id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 7[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (22)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 23 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 23 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00], ["searchable_id", 23], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$KCZH0RLG2rFNxLLcO9M0TeeFCrO077kPsCdKD/8kszfaqSE3FT4/G"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:02:56 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 23], ["user_id", 8]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 8
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (23)[0m
  [1m[35mStar Load (0.3ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 8 AND "stars"."recipe_id" = 23 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 8]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 8
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (7.6ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:03:46 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:03:46 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$ee5FxQ40/FRBqtgK4SfeJe2vL2WuQgcXDDdYXdkBbJavog1RpcLE6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"[0m  [["recipe_id", 1], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$i8gqoPkA1tScIVsEf3MsPOn73cKjxImsUjaW3UacG2fIAMDelPteG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 2], ["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (2)[0m
  [1m[35mStar Load (0.2ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 3[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:03:47 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:11:57 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$vD0wKxe3WpX1H035Cr0tqORhUL7v2bZnnruo9p5v9VwQ9lNgbwxSq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:11:57 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:12:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$v5lEf/sBXl0MC2etBNry9O0n4INKOFxTZZstH5GjaHTQLHljIZhly"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:12:21 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:12:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$TSZBKqBduzMF9MDF.oBe9Oyh0CzfkwwNwL9xnOXdxBzl4ymWch7qS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:12:37 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:12:37 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:12:37 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:12:37 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:12:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:13:08 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$gkBCeHb19hmX19P54/2VteXJWoOJZdqf5efYw6Qlb2FAErsPigq.C"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:13:08 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:13:08 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:13:08 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:13:08 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:13:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:13:54 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$qvFBdb2OJJTfZ4aXwUnnZuyox8pv6wx7jt4CJkV9h.H0VAVjXlWIO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:13:54 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:13:54 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:13:54 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:13:55 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:13:55 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:16:13 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$JaxzE2iuIzJpagE8rfigYuLMFCbwlhLmOW3My4kCjJvCfmgi9K6KK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:16:13 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:16:13 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:16:13 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:16:13 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:16:13 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:17:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$f1wvpngo5dLNYe.pIH8H3.S9qK7FJaZ0IlSOY8IunJhUZGCywGJIy"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:17:21 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:17:21 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:17:21 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:17:21 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:17:21 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:19:03 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$rUUn1./V9aXxNxkWDgTYRe9Fg84voHEYBM5bVMopRa.6xm/0Koz9W"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:19:03 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:19:03 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:19:03 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.5ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:19:03 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:19:03 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:19:27 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$22LKnMxKRK6d3BvfdS7f3e.Tj1SXHThaF7dRCqWL5jXRwmWfEMNP."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:19:27 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:19:27 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:19:27 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:19:27 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:19:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:22:30 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$V47.3B3KHfqeQcPIXBtMpOXsfWLW2WVpGHRW2DCxQN6AgfsQhIAbO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:22:30 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:22:30 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:22:30 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:22:30 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:22:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:23:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$lqAHrw4vMEIljKWsy/18.uEl7237B0bXfemNZX.IlV7iKX.WrE8Xu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:23:34 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:23:34 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:23:34 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:23:34 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:23:34 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.6ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:25:04 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Qiep5FrzE8rE/QjdIqhi7Oq2X.ObHfY4yTGfzsfknVF3EgjK3LiN2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:25:04 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:25:04 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:25:04 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:25:04 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:25:04 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (2.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:28:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$zO1KGSzXnGaGjwXNnTbKpuK/cOtnwZ9B9WIbwRtarePhibJJc/DmK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:28:23 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:28:23 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:28:23 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:28:23 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:28:23 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:31:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$coRAY310ICflvSY8KH8XSumQKoSQ0gUYTdkrX/ux0IShoNVkYSjRe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:31:44 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:31:44 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:31:44 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:31:44 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:31:44 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (1.1ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 5.7ms
  Rendered text template (0.0ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 16[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:32:20 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$nL.P.yP.3ppr.Osd20cO6uqW0WADmCuRBPnBNQapN3yAyAvUSmk26"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:32:20 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:32:20 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:32:20 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 17 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 17 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:32:20 UTC +00:00], ["searchable_id", 17], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:32:20 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (1.0ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 5.7ms
  Rendered text template (0.0ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 17[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:32:30 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$ToqTY1Vs3EF2zZGuWxQYKuT8MXnrcgG3SguCfItg3P0bTC/5Fl9Ga"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:32:30 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:32:30 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:32:30 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 18 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 18 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:32:30 UTC +00:00], ["searchable_id", 18], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:32:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (1.0ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 5.2ms
  Rendered text template (0.0ms)
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 18[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:33:01 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$pXh9k6AV1Gb.SYdMhXEx/ObWAHL1zZQeii/kaeD3WnU6hmeePoskm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:33:01 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:33:01 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:33:01 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.5ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 19 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 19 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:33:01 UTC +00:00], ["searchable_id", 19], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:33:01 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (1.2ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 8.5ms
  Rendered text template (0.0ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 19[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:33:49 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$zXqyZQlJ.2nTff/rRSshC.wXw0hzT6PkENWMBRuu0xn9R2V.siewu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:33:49 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:33:49 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:33:49 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 20 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 20 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:33:49 UTC +00:00], ["searchable_id", 20], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:33:49 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 20 LIMIT 1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 20 LIMIT 1
Completed 500 Internal Server Error in 6.2ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.6ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:34:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$W8wwYvDGl3za/TlaRPweveHKq7WOFHIKlH1AZAd7Pblebz/jDltc6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:34:45 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:34:45 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:34:45 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 21 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 21 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:34:45 UTC +00:00], ["searchable_id", 21], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:34:45 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 21 LIMIT 1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 21 LIMIT 1
Completed 500 Internal Server Error in 9.6ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:35:04 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$B6rK0tdiiq9HGegLGPBbN.fVgePgiGStKL.UFUVK82vJs2R5fNCce"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:35:04 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 22) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 02:35:04 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:35:04 UTC +00:00], ["user_id", 22]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 22 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 22 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 02:35:04 UTC +00:00], ["searchable_id", 22], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:35:04 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 22 LIMIT 1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 22 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 22], ["user_id", 22]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 22 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 20.4ms (ActiveRecord: 3.5ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 22[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (22)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (5.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.1ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 23 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 23 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["searchable_id", 23], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 23[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$9mMhVE2kwAeyTS5CNGnGGu8woCoUl3g3Vx5GZiEhRf9qtvXYks45G"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 23) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["user_id", 23]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 24 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 24 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["searchable_id", 24], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"[0m  [["recipe_id", 24], ["user_id", 23]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 24[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.4ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 25 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 25 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["searchable_id", 25], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 25[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 26 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 26 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00], ["searchable_id", 26], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 02:40:26 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (4.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (30.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$7PiOEim.jZHt4pDeBsM3l.5btWqKJt9uZsnw3MYEXOZn3sYsidpOy"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (2.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 24) LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00], ["user_id", 24]]
  [1m[35mPgSearch::Document Load (6.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 27 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 27 LIMIT 1[0m
  [1m[35mSQL (25.5ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00], ["searchable_id", 27], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 24 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 24 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.7ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 27], ["user_id", 24]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 24 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 24.9ms (ActiveRecord: 13.8ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 24[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (27)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Quh2QJMvWom8fi1k7.3ohuoJlafGyETFj5944fSGlNMDWScDNDqSK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 25) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00], ["user_id", 25]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 28 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 28 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00], ["searchable_id", 28], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:22:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"28"}
  [1m[36mUser Load (13.6ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 18.1ms
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (1.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$ze8y8ME/4oEdPr5waOztk.5CLgRoKDRXZXKe0R99J3OlxlLZHimAe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 26) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00], ["user_id", 26]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 29 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 29 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00], ["searchable_id", 29], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 26 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 26 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 29], ["user_id", 26]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 26 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 13.1ms (ActiveRecord: 2.3ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 26[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (29)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$x6Gdx8e7aLH/nwDc5ZcQaO9FVeksUElgDJisqIE6/dEwe0I27daWq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 27) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00], ["user_id", 27]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 30 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 30 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00], ["searchable_id", 30], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:23:20 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"30"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 5.1ms
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$xZNMCrGkKs9Z3h9ixe1YBOlAvl0Juc.XV2RwgExGIZs4b.CqNOH.6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 28) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00], ["user_id", 28]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 31 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 31 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00], ["searchable_id", 31], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 28 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 28 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 31], ["user_id", 28]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 28 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 12.6ms (ActiveRecord: 2.3ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 28[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (31)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$5x0HhGaMJm1D4Tl9RVpwUObKcfVXRmHpLLup3j8rcq9e4d5y5XjWO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 29) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00], ["user_id", 29]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 32 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 32 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00], ["searchable_id", 32], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:23:28 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"32"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 5.1ms
  [1m[35m (0.3ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$9EdfiXvMufuFe2qb59u4hOQQo.weRl1vK2fhN7MV7ghj.nXFyeWRi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 30) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00], ["user_id", 30]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 33 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 33 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00], ["searchable_id", 33], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 30 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 30 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 33], ["user_id", 30]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 30 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 12.5ms (ActiveRecord: 2.3ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 30[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (33)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$UgHtsy0BHY52KzB8U5mynu0PL3zuDqD2Z1FvgNLYRAiQ8RG1KhTSq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 31) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00], ["user_id", 31]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 34 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 34 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00], ["searchable_id", 34], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:24:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"34"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 5.3ms
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:25:05 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$iLQslymDTtn5byuv9i4AvOBVENsmEk6PWkp04jfFP9JbkRbkt/qSW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:05 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 32) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:25:05 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:05 UTC +00:00], ["user_id", 32]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 35 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 35 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:25:05 UTC +00:00], ["searchable_id", 35], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:25:05 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 32 LIMIT 1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 32 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 35], ["user_id", 32]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 32 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 13.8ms (ActiveRecord: 2.7ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 32[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (35)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:25:05 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$QHACsPmyYKOoGWcisvQLre6zb7.xJZ1dyaGmQ0HtpF9o.Zv.8NqD6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:05 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:25:28 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$asuLX/L26udklJl3sWwLWeEhiOwgBxp75u3cwti4oYSEFmkOqTgeu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:28 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 34) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:25:28 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:28 UTC +00:00], ["user_id", 34]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 36 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 36 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:25:28 UTC +00:00], ["searchable_id", 36], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:25:28 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 34 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 34 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 36], ["user_id", 34]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 34 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 12.4ms (ActiveRecord: 2.3ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 34[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (36)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:25:28 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$/uw6mGrkvg7cByUcu.VnSusYX5EJOPL754QxOg1xMN6MH7X8rhQL6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:28 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:25:40 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$RMNp5omp/qFFgcccTGWl8.thJLKOt1mrKdksrhtGImJdsh70N5Wb2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:40 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 36) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:25:40 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:40 UTC +00:00], ["user_id", 36]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 37 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 37 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:25:41 UTC +00:00], ["searchable_id", 37], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:25:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 36 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 36 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 37], ["user_id", 36]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 36 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 12.6ms (ActiveRecord: 2.2ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 36[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (37)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:25:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$YkYocxAth5mYBEqBXblDaOCyHO89fzDe51cyEs7W1CfebqJf0H5be"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:41 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:25:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@c.com"], ["encrypted_password", "$2a$04$UUXy40xX/7mvT2u3G6P7mO98XXSfoWjrB0R7Ay5ifj9CRSgSKNdKq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:41 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 37) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:25:41 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:25:41 UTC +00:00], ["user_id", 37]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 38 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 38 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:25:41 UTC +00:00], ["searchable_id", 38], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:25:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"baz", "recipe"=>"38"}
  [1m[35mUser Load (1.0ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 5.3ms
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 38 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$VhFFKeAZb/O/bOvbRirHzOYBiKEaiyuxvKXCrvkt/IrWtg1p9196S"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 39) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["user_id", 39]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 39 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 39 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["searchable_id", 39], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 39 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 39 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 39], ["user_id", 39]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 39 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 13.0ms (ActiveRecord: 2.4ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 39[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (39)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$sR9ZbvZ.fimAA25In0f4DOhoVQQmPr0Rgq.xaQ6pk7llagOsC2R5O"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@c.com"], ["encrypted_password", "$2a$04$C4EGQJKsVpUK2ibotxK3eu7/kg.jICOHqwZUVl6kbjRcLtp6bqYPm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 40) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["user_id", 40]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 40 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 40 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00], ["searchable_id", 40], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:26:40 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"baz", "recipe"=>"40"}
  [1m[35mUser Load (1.0ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 5.6ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$yDIERSbuTcInx0N5mpEJ3OcmoSafMJVjIxnnPyVa1ijW4EtulZax."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 42) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["user_id", 42]]
  [1m[35mPgSearch::Document Load (0.5ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 41 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 41 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["searchable_id", 41], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 42 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 42 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 41], ["user_id", 42]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 42 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 19.9ms (ActiveRecord: 3.3ms)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 42[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (41)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$NAMj2GAagfgJD3T8pZDzaOAoh0ALyoY1HnY0ViGQtQL8IAAIHfWAS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@c.com"], ["encrypted_password", "$2a$04$pWuMRLp55E4OeQIK2P9uiOEYeD1GYoFg4kZ08oTLxp/2ydPxd7Vdu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 43) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["user_id", 43]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 42 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 42 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00], ["searchable_id", 42], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:27:07 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"baz", "recipe"=>"42"}
  [1m[35mUser Load (1.0ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 5.4ms
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 44 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.2ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$3TWSQr2MizSZLrt4DqMpXeU9rNIm5pTnQkfeocb0fdf9PZBiZvOJK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 45) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["user_id", 45]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 43 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 43 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["searchable_id", 43], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 45 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 45 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 43], ["user_id", 45]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 45 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 12.8ms (ActiveRecord: 2.3ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 45[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (43)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$bunAWBVec9wdR.BeMa8P..ZYrPSuHQnnFEnO2nB0sE07Ykm9Rgg36"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@c.com"], ["encrypted_password", "$2a$04$5Km6FbK1dXJYIC0vtyTJOOScQ8jTji2hXDVkVLB48ICVsYEKj4qJC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 46) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["user_id", 46]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 44 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 44 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00], ["searchable_id", 44], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:27:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"44"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 47 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = '44' AND "recipes"."user_id" = 46 LIMIT 1
Completed 500 Internal Server Error in 2.9ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$cTCLVGhJxeF7ayWJqOq/ReKXDyHvw.mGrbFLUacOjnqxbvyLsC7Dq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 48) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["user_id", 48]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 45 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 45 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["searchable_id", 45], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 48 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 48 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 45], ["user_id", 48]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 48 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 13.2ms (ActiveRecord: 2.6ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 48[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (45)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$KgDVou6NtZB0ZCCiOzgvZeZSUpl1Im2xDdaLFMtkeuB2vfmH7vGje"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@c.com"], ["encrypted_password", "$2a$04$Z0dfPNTBe1vZhL01o0r3ROH/6iSAtgTkGsU1p.O7nJntTSakfkbXS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 49) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["user_id", 49]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 46 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 46 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00], ["searchable_id", 46], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:28:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"46"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 50 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = '46' AND "recipes"."user_id" = 49 LIMIT 1
Completed 500 Internal Server Error in 3.0ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$0krk2o8pHk8.YxtRJrkjUuW7HE5uqSTFWG7uLHnJFIs9dxwEyxRtC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 51) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["user_id", 51]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 47 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 47 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["searchable_id", 47], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 51 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 51 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 47], ["user_id", 51]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 51 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 13.6ms (ActiveRecord: 2.5ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 51[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (47)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$ThCEiUce8DKremj7IyO.2.3y0G29P4liStzKR0ZqbMwUMKsLFjemq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@c.com"], ["encrypted_password", "$2a$04$8.G24okGuhyRAMjO2WvzhuoRLcgptId/xBr0k28S6uIPO4X.ehshG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 52) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["user_id", 52]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 48 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 48 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00], ["searchable_id", 48], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:29:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"48"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 53 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = '48' AND "recipes"."user_id" = 52 LIMIT 1
Completed 500 Internal Server Error in 3.0ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Zcf3DQFs7Uer48yVS4yB9.Jr5YzJQgE3TPzKYT3dT9gzOkfn4tPDG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 54) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["user_id", 54]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 49 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 49 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["searchable_id", 49], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 54 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 54 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 49], ["user_id", 54]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 54 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 13.8ms (ActiveRecord: 2.6ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 54[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (49)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$gIxAcxFHvVPsaiRCfb2iTuXPD.ts44bNBAclDLyBT9eihp3xn7JeW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@c.com"], ["encrypted_password", "$2a$04$aa6KurjWjw6Y9FPFwblFx.WoWLzriVQZkvIwptke3bKULdUwR.An6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 55) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["user_id", 55]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 50 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 50 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00], ["searchable_id", 50], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:29:42 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"50"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 56 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = '50' AND "recipes"."user_id" = 55 LIMIT 1
Completed 500 Internal Server Error in 3.5ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$oHsD02/NgvZQabNzen1UNuXMz3QjvQRpv4iHlWAiVXNc3xcuXlkXS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 57) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["user_id", 57]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 51 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 51 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["searchable_id", 51], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 57 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 57 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stars" ("recipe_id", "user_id") VALUES ($1, $2) RETURNING "user_id"  [["recipe_id", 51], ["user_id", 57]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 57 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 12.5ms (ActiveRecord: 2.3ms)
  [1m[36mSQL (0.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 57[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (51)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@b.com"], ["encrypted_password", "$2a$04$VvvzurPoMFAzWPPPclgPCuGrQQL82hge2A.dIBJupGjHoijKYhuHq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "down_votes", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "up_votes", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["down_votes", 0], ["email", "a@c.com"], ["encrypted_password", "$2a$04$6aavxisP1hAQ/ksUtMDBaO5lA/S4WwD4jJbQ68qEV59ZxTz4fJkfS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 58) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["user_id", 58]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 52 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 52 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["searchable_id", 52], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 59 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 58 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 58 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 59) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "down_votes", "forked_from_recipe_id", "revision", "slug", "title", "up_votes", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["down_votes", 0], ["forked_from_recipe_id", 52], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["up_votes", 0], ["updated_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["user_id", 59]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 53 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 53 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["searchable_id", 53], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00]]
  [1m[35mSQL (2.5ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["recipe_id", 53], ["revision", 1], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:30:08 UTC +00:00], ["user_id", 59]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/foo
Completed 302 Found in 33.1ms (ActiveRecord: 7.3ms)
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 59 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$nX/s8aF72Ih.AuaukQfvw.6TAGOvQg4UQucf70SzOUBG8Ybo0GT5O"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["recipe_id", 1], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 15.2ms (ActiveRecord: 2.9ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$ql29snGWVrqss5Z1BQy3zevFrMCc7SSyRTWBMHeO0/MWNCYnoa11m"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$yklcuXQdczUxW5s2ceWyUe2a/JItr25DJdYGGnUt.o3XoM3qqS/EO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", 2]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 2 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["forked_from_recipe_id", 2], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00]]
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["recipe_id", 3], ["revision", 1], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/foo
Completed 302 Found in 28.0ms (ActiveRecord: 5.2ms)
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 4
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$dqZ119PNPSrMrvOF6KE5w.GgziidSkyoiEyVAAxW5Pu11LwMrqhfW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["recipe_id", 5], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 5
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 6
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$SptKCT4Ha5ElzdgFPYzMHuZWzxupzAJEmDbn0B15..e.H3Ih1065G"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["recipe_id", 8], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 5[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (8)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$j5SHYMmpu9B4U07QagImh.dq5dFiZcDC2.qFOSzSpljT5QJd9sN3O"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["recipe_id", 9], ["updated_at", Sat, 22 Mar 2014 22:32:43 UTC +00:00], ["user_id", 6]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 6
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)[0m
  [1m[35mStar Load (0.3ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 6 AND "stars"."recipe_id" = 9 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 6
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (5.5ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$EAj6Gwk3Q3iae/oYjjwNweKYckiwlQe.K.a5W19GjN/1QxN54fEMW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["recipe_id", 1], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36mStar Load (0.2ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 1 AND "stars"."recipe_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$5yOTr/hmnGaIcLPVqI9GO.ldgDtu2PXHqjac0aoHHB3s6dwCL9hDG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["recipe_id", 2], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (2)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 4
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$f/LN5uZwD5RnZfn4GBCUneT2MgDUhG3AxLn9e084Tv2IUPjDbtCXe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.4ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["recipe_id", 5], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 5
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 6
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$lvNvBbe1MLKGY8Vsy7GjVOEaCYJkx3HGyIG3e9yUtfNhfg3K/sI56"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["recipe_id", 7], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
Redirected to http://test.host/foo/foo
Completed 302 Found in 7.6ms (ActiveRecord: 1.8ms)
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (7)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$JbFACETXgMsdkehajeNusuVce3VG3OrxqFh7R2qTozOkOQwErYxxW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$EMlNtdNYEuDxfNoOaiMuKen06TZnBqr2kYQx3HmZCoQoZhoX53.J2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:33:30 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:33:31 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:33:31 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 5 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Sat, 22 Mar 2014 22:33:31 UTC +00:00], ["forked_from_recipe_id", 8], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:33:31 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:33:31 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:33:31 UTC +00:00]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Sat, 22 Mar 2014 22:33:31 UTC +00:00], ["recipe_id", 9], ["revision", 1], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:33:31 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/foo
Completed 302 Found in 62.3ms (ActiveRecord: 5.0ms)
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (6.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$GbX7yBUL9iYnEavscHYZpuWmJ423QI7cr8AKfFWW3cqcrZ1p7L4dG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["recipe_id", 2], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 3[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$t.x6QQI4CGDLbo9zKaLgweKJOWT8ZoL9TsvDYHAox9IoTSXlEbzGe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["recipe_id", 5], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (5)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$WI9OaNVdW8pJ/fOpKrfLmO5lEJjTElE9oSPK1cVjuXjYeT.A/ragu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["recipe_id", 6], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (6)
  [1m[36mStar Load (0.2ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 3 AND "stars"."recipe_id" = 6 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$S6q6dmWi.q/rqNqIGRPGVuqORws3cRqiCKkPGQTHp9nnTNYozEnR6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["recipe_id", 7], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4[0m
Completed 500 Internal Server Error in 11.0ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$qPH68xERCe568AyoYnMJXe0wqfK2xqM1tIpQGS2CEP/g9tuaN5uEy"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$r3mnZK434J2UoHgFrXaEtusfgJ2n9CP4hrZuueuQ..kTXy4ugKEyC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 5 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["forked_from_recipe_id", 8], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00]]
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["recipe_id", 9], ["revision", 1], ["title", "foo"], ["updated_at", Sat, 22 Mar 2014 22:34:11 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6[0m
Completed 500 Internal Server Error in 65.1ms
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (28.2ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$L3zUJjzD8B4/V8zcrvi00.bgTorO.Yr32CE/gWwJHGdO9LM089WqG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (12.5ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (6.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["recipe_id", 1], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 15.6ms (ActiveRecord: 2.7ms)
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$MpniLkDKatkmuBOYXk3zKOm.5jVblBiOImOlRBQxVIm6EUUZLCLnS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$qumUYVGMqFf3ZjAtT1nH4.HqHyyKWXy0.6hp6F3ZPrTm/4kPCbN9W"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", 2]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 2 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["forked_from_recipe_id", 2], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00]]
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["recipe_id", 3], ["revision", 1], ["title", "foo"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/foo
Completed 302 Found in 40.6ms (ActiveRecord: 6.0ms)
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$n67SORuFtq3/f0GrS4YZOef837iBDCMoFxLXOUioYD7bvPVwJn/ii"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["recipe_id", 4], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (4)[0m
  [1m[35mStar Load (0.3ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 4 AND "stars"."recipe_id" = 4 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.4ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$EBYnibzhceJp27oScNM3re3aP/bOzxjBDgjtKbWlKTTuqEmlqh43O"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["recipe_id", 5], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", 5]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 5[0m
  [1m[35mRecipe Load (1.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (5)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.4ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 7[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$KSB8yBlPf36JKv6C2vgLC.ys3huRlHZzIjt4KCEa6jYHdY4TvnWKm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["recipe_id", 8], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 8[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Sun, 23 Mar 2014 23:41:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 9[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (4.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (18.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 25 Mar 2014 02:08:03 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 25 Mar 2014 02:08:03 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (11.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (19.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 25 Mar 2014 02:08:03 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 25 Mar 2014 02:08:03 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (3.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 25 Mar 2014 02:08:15 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 25 Mar 2014 02:08:15 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 25 Mar 2014 02:08:15 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 25 Mar 2014 02:08:15 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mUser Load (2.3ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 18.0ms
  Rendered text template (0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 25 Mar 2014 02:08:25 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 25 Mar 2014 02:08:25 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 25 Mar 2014 02:08:25 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 25 Mar 2014 02:08:25 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 7.4ms
  Rendered text template (0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 25 Mar 2014 02:08:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 25 Mar 2014 02:08:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.5ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 25 Mar 2014 02:08:43 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 25 Mar 2014 02:08:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 8.4ms
  Rendered text template (0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 25 Mar 2014 02:10:24 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 25 Mar 2014 02:10:24 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.4ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 25 Mar 2014 02:10:24 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 25 Mar 2014 02:10:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
Completed 401 Unauthorized in 7.6ms
  Rendered text template (0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 25 Mar 2014 02:11:02 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$0Z1OuKZu1uJUhdmJLWFD1Ok00Po7Ye0gcIZd2Ygx/76abj47qGQXS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 25 Mar 2014 02:11:02 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 25 Mar 2014 02:11:02 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 25 Mar 2014 02:11:02 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 25 Mar 2014 02:11:02 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 25 Mar 2014 02:11:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mUser Load (1.4ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 6.8ms
  Rendered text template (0.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.1ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 25 Mar 2014 02:11:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$FwLXrQJdJIg1B18y3HjhR.Kda3grkFxvpv4Vouf/L8ejYEoF6uU8G"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 25 Mar 2014 02:11:34 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 25 Mar 2014 02:11:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 25 Mar 2014 02:11:34 UTC +00:00], ["user_id", 8]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 25 Mar 2014 02:11:34 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 25 Mar 2014 02:11:34 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mUser Load (1.1ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
Completed 401 Unauthorized in 7.0ms
  Rendered text template (0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (3.1ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 25 Mar 2014 02:11:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$RhBK4Oi8rY8OJx6XZGe62.Jp4t32JPBQbYQHGIQhT.kECHZYKtfUy"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 25 Mar 2014 02:11:58 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 25 Mar 2014 02:11:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 25 Mar 2014 02:11:58 UTC +00:00], ["user_id", 9]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 17 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 17 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 25 Mar 2014 02:11:58 UTC +00:00], ["searchable_id", 17], ["searchable_type", "Recipe"], ["updated_at", Tue, 25 Mar 2014 02:11:58 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mUser Load (1.0ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
  [1m[36mRecipe Load (7.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 15.6ms (ActiveRecord: 8.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (17.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (6.2ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (23.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$R43SNOn3XxZtOiDTu6awIu4/0GtrBEGkvAzIL.oU7dViDik83y74O"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["recipe_id", 2], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 2[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 3[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$a16J8zMqVQ.J3phKfEI8kev1rDZDSisXmGoc2VMhQfLzYn0WkQoaC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["recipe_id", 5], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (5)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$gD9sv8VZiW87C2QFtprc/ujxWmuXEbR2RQJkhEqmzPp.r.xeckHq2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["recipe_id", 6], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (6)
  [1m[36mStar Load (0.3ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 3 AND "stars"."recipe_id" = 6 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Nw0ByAqmcqpyJtzzVKL.FeR.V9.1OG9iC10RBOtAKN3bHrnQIr1RG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["recipe_id", 7], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
Redirected to http://test.host/foo/foo
Completed 302 Found in 11.0ms (ActiveRecord: 2.8ms)
  [1m[35mSQL (0.4ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (7)[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$ZrgKbeTKhmTGngRRXG11/.dgXUiErKPPTTIQeWboQv61fO2nyBd56"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$nZaDUwjMv2EYr/EjY8Ni6.T1lev.S8hCVPeBY3rG2kLnM6OYIGrdS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 5 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", 8], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["recipe_id", 9], ["revision", 1], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/foo
Completed 302 Found in 65.4ms (ActiveRecord: 5.0ms)
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Q/KkSNwiFhyTPAnA89P5bOCP4mFUD.exhqEtK6Zit7LXSbeLzEmIa"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mUser Load (1.0ms)[0m  SELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 8.7ms (ActiveRecord: 1.8ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$SRbJPmXy4x658Nif2q5bJOd4l1sW7xJ51d1giwromC0dzPvkKK07q"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$hOkqzCMidmdCJc.ZAlBEKeKlxIIquTOHKzVmheoomfvjA.OoYK72m"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 8]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["forked_from_recipe_id", 11], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.4ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["recipe_id", 12], ["revision", 1], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:21 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 11[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.4ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 11 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.4ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 11 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 11]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"username"=>"baz", "recipe"=>"foo"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 9 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 12[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 12
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 12[0m
Completed 200 OK in 49.1ms (Views: 42.5ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (9.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:42 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:42 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (6.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Mon, 31 Mar 2014 23:52:42 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:42 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$9AvPxK3Q2uC3iBA7vzVWOecmEnXahQSJdQlXFiG/C2I3.YS3R70fu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["recipe_id", 1], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$Ll/MbGxtN0Svl/vN2y67wuDg.YvDjSK81NZ9UKR.Qjan9MWdNfvXS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["recipe_id", 2], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (2)[0m
  [1m[35mStar Load (0.2ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$8rSO2BczQbhxN98WT1by3ODTM4Zp2Lp.C9WzN/s8TvVE97jLGmeUm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 3]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["recipe_id", 3], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
Redirected to http://test.host/foo/foo
Completed 302 Found in 8.9ms (ActiveRecord: 1.9ms)
  [1m[36mSQL (0.1ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (3)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$hTsNEHowZPkJ7g83KRHsV.ZA5uu6Fs6iDwGK1/tG9ynizF7PfNmQm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$IFO0G67DtQeoGJvM9d2OzOqQz/zKUZSQUVIBxfgpfYJUGM40v8dK."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.3ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"username"=>"foo", "recipe"=>"foo"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT id FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 4 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", 4], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["recipe_id", 5], ["revision", 1], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/foo
Completed 302 Found in 28.7ms (ActiveRecord: 5.0ms)
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$A4MImeOUpqup5tXFaPuUUO.VJSGxSN5yKJ1GXeEsWwww.kHkBAQtW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT users.*, COUNT(recipes.user_id) as recipe_count FROM "users" LEFT JOIN recipes ON recipes.user_id = users.id GROUP BY users.id ORDER BY recipe_count DESC LIMIT 10[0m
  [1m[35mRecipe Load (0.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
Redirected to http://test.host/foo/foo
Completed 302 Found in 7.8ms (ActiveRecord: 1.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$doYu3H/hRGXzddt8cThdZeLoWFULl0EpdXATIlWDNlK/61Red79je"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$lc5R.7ZCgMdDKGndYkkLmuDwg7eMx/EsL3Xt6zqXuOYYHNnlZPBdi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", 7], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 8]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["recipe_id", 8], ["revision", 1], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 8]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 7
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 7 AND "taggings"."taggable_type" = 'Recipe'[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.6ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 7 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "recipes" WHERE "recipes"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#show as HTML
  Parameters: {"username"=>"baz", "recipe"=>"foo"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT id FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."slug" = 'foo' AND "recipes"."user_id" = 8 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 8
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 8[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 8
Completed 200 OK in 18.3ms (Views: 12.0ms | ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 9
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$13lW0dNLk0Gi.xlwmjB7/OZdyJP8Rqcjb9EWfy7ujeSNid58VkDBi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["recipe_id", 10], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 10
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 11
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.4ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Mon, 31 Mar 2014 23:52:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (17.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["image", nil], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 1 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$ZY4oENahPQpbl353jkG3DeV1svJbYPLlygwlderLcR1WccFeB5NXi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (3)[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$HncDvv3dxSnjcjFnLbCf..rQh9FzzVMS9ohkPa4959tmGdQa3U29q"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["recipe_id", 4], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (4)
  [1m[36mStar Load (0.6ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 4 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 2]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 5
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$A5/fUfQWxuVWYXMrHIhwUO.mtQU36CWPq5YoQ18s1TYa.QsiyeZOC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 6
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 7
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Msm2q0frZ9wCdkhtUAQEauCjqRfPvZbqavKRkJOSFFfD8pbzcfihq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 01:58:38 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 19.5ms (ActiveRecord: 4.7ms)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$KWCKPOsi0MO3IziPn81Py.gqk5UpsY81pIjsZGYYSvJzcNtc48B02"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$lSqjdIswv/pR/i9KFJX05OD7MTeKwJ2NdVz9LJxNo/EgiWVqZFDve"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["user_id", 5]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["forked_from_recipe_id", 10], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00]]
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["recipe_id", 11], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["user_id", 6]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 10[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.7ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 10 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 10 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 10]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 11
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 11[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 11
Completed 200 OK in 154.9ms (Views: 141.8ms | ActiveRecord: 5.3ms)
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$UrUcLt0onstaSUSV5jZHMONkBMTwg1SHsIpLpRqfuHB4WhfMOGjM2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.4ms (ActiveRecord: 1.7ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$07m12h3Eep5chPLoL//jaeG4N13.SMdN.Q9MrVOuWfwPEpcQcW2sa"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["username", "foo"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$3EActlFsWk5.U7aDnMqxIeJtiORidKK2v8jsWgeHpwCClmtvH1dOO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["user_id", 8]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 8 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["forked_from_recipe_id", 13], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["recipe_id", 14], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 01:58:39 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 24.7ms (ActiveRecord: 8.8ms)
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (15.2ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.1ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["image", nil], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 1 LIMIT 1
  [1m[36m (1.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.5ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Ca3oxLqkTyYlGfCA2bnpDOsJtAS9nIEatNqBjiiwgZo/WTFXCtdWi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["user_id", 1]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (1.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 1 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 68.2ms (ActiveRecord: 7.3ms)
  [1m[35mSQL (0.5ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (3)[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$a2VqOZ.HrorPcBLPILZYb.gahXl7fkkIPtjg2V/bXuBMJDvn9vCvy"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$GYmT1rJlQpLn7Q8EnxZlIeXMd0q6u54uercsLTTTUldQ8NVJda9S6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["user_id", 2]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:42 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["forked_from_recipe_id", 4], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", 3]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00]]
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["recipe_id", 5], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", 3]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 4
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 4 AND "taggings"."taggable_type" = 'Recipe'[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.7ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 4 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "recipes" WHERE "recipes"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 5[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 5
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 5[0m
Completed 200 OK in 151.5ms (Views: 137.5ms | ActiveRecord: 5.1ms)
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$pvE4saGmFKBl9AKHIT83A.8rJEFo7RW2mGL78/zZb5ms.XRcA1hNS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 6.8ms (ActiveRecord: 2.2ms)
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$p86S4Fi.1UpXuuAD9BZBTu1IU4KG.k/mu1h39UjO922EYW1V8QgVS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$G9J.54Dfn1MDPS/7DpHH1.ngH4IWylCRWb6roFPIqVtpGN4CY/p7y"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["forked_from_recipe_id", 7], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["recipe_id", 8], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 26.4ms (ActiveRecord: 9.3ms)
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$fd841yoUn5LhM03Qj7gfA.yqByFb3zTIDdviWgiR6TUVttoV73TBi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", 7]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 7[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (1.4ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$Y8aYgopVFkUdTiKYrYQSg./XPWSbauSv9ycacE4TkXCvsvuYgEnDa"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["recipe_id", 10], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", 8]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 8
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (10)[0m
  [1m[35mStar Load (0.7ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 8 AND "stars"."recipe_id" = 10 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 8]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 8
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 11[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$O/z9dfnd6d5zJRtN317DKe6dNDAPPWdZ2Io4tOyloLV73NL8O90O."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", 9]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["recipe_id", 12], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 12[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 13[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:00:43 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (1.8ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (8.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:01:52 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$aHEktlXs7X8iY41UzYaJL.rKtRhylDpbebPetkAStXEKNUNGjvjYu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:01:52 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:01:52 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:52 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 1 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 76.0ms (ActiveRecord: 6.0ms)
  [1m[36mSQL (1.0ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (5.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$JSMntC2hxKpx47f4YyyBvOWh.qoPXe0pCwrk/DShUMuzIpnHxPvz."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$/aVg3Yc5QToibwiHGTHJjOBabLYE9.hERr/j7HecWdOCO1Tv3PDn6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 2]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 2 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (2.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", 2], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["recipe_id", 3], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 87.5ms (ActiveRecord: 13.6ms)
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$SroxZKgBbmC/fGViu6cgfentJfow9sg1cXLuhrs1HsJDQyEntSX1q"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 4.8ms (ActiveRecord: 1.5ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$P5kAPAPxqX9uhHNo5k4EWOLrCtCyZ0wn.x7uFxRmN8vMejoN2Stfq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$/NO140qGaWUJE8TQAAWNXeNRSMVJmUe38uKA4j2/p3.jtLvcX6e5e"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 5]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", 5], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["recipe_id", 6], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 6]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 5[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 5 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 5 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 5]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 6
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 6[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 6
Completed 200 OK in 140.9ms (Views: 129.5ms | ActiveRecord: 4.3ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["image", nil], ["recipe_id", 7], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.7ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 7 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.5ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 8 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$fMZrXRZrx6Nxykx9qTQsy.L0hT2KSBwCOEwzhwjUwrfHRmAjRP2fG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 7]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 7[0m
  [1m[35mRecipe Load (1.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$H72lzjutsvoDbejaQ/5wpeaO7Zn2KHyBtzuC3OF2759B5YCK9BNG2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["recipe_id", 10], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 8]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 8
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (10)[0m
  [1m[35mStar Load (0.6ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 8 AND "stars"."recipe_id" = 10 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 8]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 8
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 11[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$12ziEFge4ZZVlBBV4.IuSOr.51cA/DP3NmmnWaxlLYIuPG7nQlj1O"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 9]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["recipe_id", 12], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 12[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 13[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:01:53 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (1.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (3.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (13.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:05:49 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$0bjyoPHFasYdThopY7NQ7uDYaOjcnguKFOC.hsJbPWd7Ha9r2McXS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:05:49 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (2.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (4.5ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (1.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (3.1ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00]]
  [1m[36m (1.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (1.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (2.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 1 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (1.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.5ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (2.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 154.3ms (ActiveRecord: 13.8ms)
  [1m[36mSQL (0.8ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (1.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (2.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$j9F1eS3e4r7ZUghVRR4onO2gSdK51a9m/mjFZhpSNZyf9zQuQv4c2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$R.JR4v6kuX0U9d7Frzf5n.o46yMQ0EHTJg0n/QsAsdrhmy5Yw3VgG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["username", "baz"]]
  [1m[35m (1.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["user_id", 2]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (2.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00]]
  [1m[36m (1.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (1.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 2 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (2.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["forked_from_recipe_id", 2], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (3.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00]]
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["recipe_id", 3], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["user_id", 3]]
  [1m[36m (3.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 130.9ms (ActiveRecord: 29.8ms)
  [1m[35mRecipe Load (1.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$z6if9pzy2v8tsKTYmTa5zepksKnHjGIusW4NSl5.cTm2l4GLKMgb6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (2.4ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (2.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 9.0ms (ActiveRecord: 1.9ms)
  [1m[36m (3.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$boO6C6BamAqFsgllHnKiu.gu9/JqC19BijgqJmmrVjhsz.uw.9Jwq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (2.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (2.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$4HJBjvTcvceTzFRtrCGppul91Jv8mhfxNIbVJwk9JrI3IX6Cnq9SC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["username", "baz"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["user_id", 5]]
  [1m[35mPgSearch::Document Load (0.9ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (2.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (2.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00]]
  [1m[36m (1.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (2.5ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["forked_from_recipe_id", 5], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (1.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (3.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (3.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00]]
  [1m[35mSQL (3.2ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["recipe_id", 6], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:50 UTC +00:00], ["user_id", 6]]
  [1m[36m (2.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 5[0m
  [1m[35mActsAsTaggableOn::Tagging Load (2.1ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 5 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 5 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 5]]
  [1m[36m (1.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (2.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 6
  [1m[36mRecipe Load (1.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 6[0m
  [1m[35m (2.7ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 6
Completed 200 OK in 360.3ms (Views: 329.9ms | ActiveRecord: 10.3ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (1.0ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00]]
  [1m[36m (1.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 7
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$XlWXq/w4hA/Y6xfosMPituxyQNTMFbDK/suoYGyQZswv19qcrlQm."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (1.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["recipe_id", 8], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", 7]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 8
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 9
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$pR3qMrdse96u8FJQMfmjPOYAPxad82cFHKMJ7S1nuQG0sgQrlN.4m"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["recipe_id", 11], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", 8]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 8[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (11)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (1.9ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$QuNSzlLf/yvbgllTSiRW5e0bfDx3N9TSBc3rpKzoQvEcWROEHJLOe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["username", "foo"]]
  [1m[35m (1.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["recipe_id", 12], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 9
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (12)[0m
  [1m[35mStar Load (0.6ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 9 AND "stars"."recipe_id" = 12 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 9]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 9
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (2.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["image", nil], ["recipe_id", 13], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 13 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.9ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:05:51 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 14 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (1.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (14.2ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["image", nil], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 1 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.5ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 3
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (2.1ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$tMPUc7iNO4dp84SI0vGLpuxu8BK5BA/BIsMFliVij7GaMSyJE7PhG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", 1]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["recipe_id", 4], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 4
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 5
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$n6QpK2Xp29dU0EAlEp2Ku.oRS.7L8oyBuF14MZDQZ.ZMgSlvILkUi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", 2]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 2 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["recipe_id", 7], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 19.7ms (ActiveRecord: 4.5ms)
  [1m[36mSQL (0.7ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (7)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$1TOg5Qsf/0OG0YQQzwgHDO1C19l.fMOU.sdU/KM/eZBqLuMi5EORq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$sEyB0LrD6vZpNmrpuK2ZZ.h85s8U2ta14llIR0hzN8ftGnPQXJv6e"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", 3]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["forked_from_recipe_id", 8], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00]]
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["recipe_id", 9], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:56 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 8[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 8 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (1.1ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 8 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 8]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 9
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 9[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 9
Completed 200 OK in 144.7ms (Views: 132.8ms | ActiveRecord: 4.5ms)
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$i4j6UJorpRIgBRkxkwVnguLFVig8nrESuGIeQxUiGvL0wfsdXspq."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$tQ2JTRFgAzjPKISyEGXJz.EGyIVT8IkCeuLQc2OBDmmAON9j7dEVi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["user_id", 5]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36mUser Load (1.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["forked_from_recipe_id", 10], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00]]
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["recipe_id", 11], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["user_id", 6]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 29.7ms (ActiveRecord: 10.0ms)
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Yn3pYL04cV9JJSSsHNzW3emDuTPyDHRmxMJpsZq79TbnkLjQlnIIS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.1ms (ActiveRecord: 1.7ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$I1fcjMP93.rohXq82WXtjO8h3ckz1m9Fq11k/7MkcxLX.mU//Ikqe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$sqG0rdx9bnp4jEJ48C9UFeSbWHTEVScz93ihkYnA9uPf4cgETFwGu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["recipe_id", 13], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 9[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (13)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$cgbGVXbIapmeS5Kncez83eZldjnBJHkirfIRWVXgh8nfolONd/6Lu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["recipe_id", 14], ["updated_at", Tue, 13 Jan 2015 02:35:57 UTC +00:00], ["user_id", 10]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 10
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (14)[0m
  [1m[35mStar Load (0.9ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 10 AND "stars"."recipe_id" = 14 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 10]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 10
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (2.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (30.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00]]
  [1m[35m (1.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.9ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (2.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$ixtsdxG9Uk8HpaRjqc0tj.li/zlbXcewFOAFqKqKr5b/CzZM/P0e."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (1.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00], ["recipe_id", 2], ["updated_at", Tue, 13 Jan 2015 02:38:40 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 2[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (3.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 3[0m
  [1m[35m (2.6ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (2.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00]]
  [1m[35m (1.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (1.3ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (2.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$vmTSBKcLfs5Tcq3Qm5rwou2OSY2UfFL9MjVOxtdNjTSI8PDjJqFay"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["recipe_id", 5], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", 2]]
  [1m[36m (1.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (1.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (5)[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.1ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (10.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$dzt//jZJ56ZfPVeO8ye87.RUcmAxYlDFjRgRccbJcKDH0ltkfv07y"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["username", "foo"]]
  [1m[36m (1.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", 3]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3[0m
  [1m[35mRecipe Load (1.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (6)
  [1m[36mStar Load (1.9ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 3 AND "stars"."recipe_id" = 6 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 3]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (2.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["image", nil], ["recipe_id", 7], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (1.8ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 7 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (1.0ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 8 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (5.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$a2MeXtjFILZgxbTwxsUQ7OGSAKG0MAkzKzCKsXg/HKFZmrW2OOH7y"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 32.2ms (ActiveRecord: 7.4ms)
  [1m[36mSQL (1.3ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4[0m
  [1m[35mRecipe Load (2.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (3.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (4.6ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$xv0F78By7bjgDRk7REa5UOmhNmpY1T4yoP.IYajN5kPddooZaQDNm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (1.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$aVMm0olq1rWZLrQ3rB8SGOQx3vfYPJ7EbFeLGenbbTgeMZ/lHZbeO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$O732cZ5bJYBxBppCd/K0rOd8K5FjT97edZ9/PD7MUca6t4J7catBa"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (1.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36m (1.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["forked_from_recipe_id", 10], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00]]
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["recipe_id", 11], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["user_id", 7]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 89.9ms (ActiveRecord: 17.0ms)
  [1m[36mRecipe Load (3.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 7 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (1.4ms)[0m  ROLLBACK
  [1m[36m (5.1ms)[0m  [1mBEGIN[0m
  [1m[35m (4.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$yIksgACNgsOmULdL7olUr.AYI5nx2hpS9GrT72fypQH6gQLkiNNiq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:38:41 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$KDFAuna1lC2gfaQixaXRJOrchJxElAXPwfHHFq7E6kyYAiQo5mRte"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["forked_from_recipe_id", 12], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["user_id", 9]]
  [1m[35mPgSearch::Document Load (1.1ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["recipe_id", 13], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 12
  [1m[36mActsAsTaggableOn::Tagging Load (2.0ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 12 AND "taggings"."taggable_type" = 'Recipe'[0m
  [1m[35mActsAsTaggableOn::Tagging Load (1.4ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 12 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "recipes" WHERE "recipes"."id" = $1[0m  [["id", 12]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 13[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 13
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 13[0m
Completed 200 OK in 189.9ms (Views: 172.2ms | ActiveRecord: 6.3ms)
  [1m[35m (1.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$sh1PUTeVCSF0MiR402ZBjuySjOogGO58yfC9SP8D/xp5DYbJD.9JO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["user_id", 10]]
  [1m[35mPgSearch::Document Load (1.1ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:38:42 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mRecipe Load (1.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.9ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (14.6ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:40:46 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:46 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["image", nil], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 1 LIMIT 1
  [1m[36m (1.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.5ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$gfsKv56Ztvrqq.VGt6Mk6.Dd/ovQ6yjgQDCoYPi/Wmbf4ADfA4idm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 1]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 1 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 64.1ms (ActiveRecord: 7.2ms)
  [1m[35mSQL (0.5ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (3)[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$jOL0XIxGT58zRhOEVm/iPeZm.jcVmVpzSJu6iI7a2zE7lqcZCp/Xu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 2]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["recipe_id", 4], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 4 AND "recipes"."user_id" = 2) LIMIT 1[0m
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["recipe_id", 4], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 195.2ms (ActiveRecord: 18.2ms)
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 2 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$TnRtN640GBGO10rKfsz/SOI.zK9V5XWZM/dpMYdso0zIFpjHaXw.K"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.4ms (ActiveRecord: 1.7ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Vwg2J3bM3Rdcz10YGqEkNeGZpt66b4dZ.GWdYnpCYuamG48XmzWDG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$K2G6jj1b/IGOUaYL/o.5HOduVJTvf0.znuIhi1Sx5k1dFEHAdrjly"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (1.0ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["forked_from_recipe_id", 6], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["recipe_id", 7], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 5]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 30.8ms (ActiveRecord: 10.4ms)
  [1m[35mRecipe Load (1.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$fQEN6bkKPnpTkyLmhAb2SOVI9SWnq2ZsUshZ.80EGMP7NQSEg/gqS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$oGKDMB7OnX1/YBaRhsYJneQBy8Xgz9mjKmY4jc8F.0n./Y/yCH8By"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["forked_from_recipe_id", 8], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["recipe_id", 9], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:47 UTC +00:00], ["user_id", 7]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 8[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 8 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 8 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 8]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 7 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 9
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 9[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 9
Completed 200 OK in 157.6ms (Views: 145.4ms | ActiveRecord: 4.2ms)
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 10
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$j.Z6S5P3s8xkgoLJofNXvePBjErbTVCO7nocXni3zJjpnRwZPRRGm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.3ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["recipe_id", 11], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["user_id", 8]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 11
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 12
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$GrNhnfSTTfBF49UojxB0fOr.I61uXyOZ.f6H9/3UDlfpcnNNMhSHu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["recipe_id", 14], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 9[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (14)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$azuQICH9nITbOBwCWydGreTq9VO.A7gNlrEuOQdxnMvQKEazk7CVW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["recipe_id", 15], ["updated_at", Tue, 13 Jan 2015 02:40:48 UTC +00:00], ["user_id", 10]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 10
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (15)[0m
  [1m[35mStar Load (1.3ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 10 AND "stars"."recipe_id" = 15 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 10]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 10
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (15.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:43:57 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:57 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (2.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$h7wo2Z5AbCJBEceHp/Vb8eahcwLz9Fq0JiTzwrVc9fhXsyZbOt/Bm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$3cXLR92fvyrQl4qDLyzHlOEHJtRlH2pIZgRlVqRhrnYtmMbyZFWQe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["recipe_id", 2], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (2)[0m
  [1m[35mStar Load (0.6ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$xPH3kcl0EZVdSjr93qMf0eEgwzMLtkVDN0yodVvNiUZmctxuLguEy"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 3]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (2.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 66.9ms (ActiveRecord: 4.6ms)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (3)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$xL18tpqkM6Voz/e52U72M.Y4bEQ4AzRDb5QEGQP4ylFhppUVtTZRe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$XXIXllZlUOC9cIg0.j4IlOWWkXuy3z.K0I82POCsFu6MWkf4vWpbK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (1.0ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["forked_from_recipe_id", 4], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00]]
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["recipe_id", 5], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 5]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 53.9ms (ActiveRecord: 13.3ms)
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$LntKylZFkUzGzsOMa5o1i.Q3en.mRaO.EnbImwAJpP18LHSPxzf7W"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$QYh2Z6jTkSdv7Bci9f/XY.eiZ4UcJUWLeQ2Ovb.9vB6PW2y/7kLzG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["recipe_id", 7], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 7]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 7 AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["recipe_id", 7], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 7]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 148.5ms (ActiveRecord: 14.4ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$UTJVBCjm30aeqipvYqpnpeP7rGgz0Q.0BRLrulQhy.CPghRcqY4yq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 6.1ms (ActiveRecord: 2.2ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (1.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Ut4Rt1AJlUe8BO8Q3LOmQuieQ8g4mNkC9ah35IaKP28Cldc0Q4CcK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$mbzdLD38uOTKCFD8o73.ku1zdfovHC209YyzuBN1ZGq9Ln595Rtj6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 9]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["forked_from_recipe_id", 9], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 10]]
  [1m[36mPgSearch::Document Load (1.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["recipe_id", 10], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:58 UTC +00:00], ["user_id", 10]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 9[0m
  [1m[35mActsAsTaggableOn::Tagging Load (1.6ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 9 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (1.0ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 9 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 9]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 10 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 10
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 10[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 10
Completed 200 OK in 148.4ms (Views: 136.7ms | ActiveRecord: 4.2ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["image", nil], ["recipe_id", 11], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.6ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 11 LIMIT 1[0m
  [1m[35m (1.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.6ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 12 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 13[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$XgQjypsktcwAjxZpmyt9bOeovnpWRNA5Le3QMWwzNjAClqlok3J76"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["user_id", 11]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["recipe_id", 14], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 14[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.5ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 15[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:43:59 UTC +00:00]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (13.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:45:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.4ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["image", nil], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.9ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 1 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 3
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$4nsY2xm0BTRKW7Jan21kf.U2gYEFAVr5QmCjb0I8iM9uqf/5Fttfq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 1]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["recipe_id", 4], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 4
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 5
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$aOOwcQBDNv8EAQRs.biU1O9qgvYQ.VVaV51WgOvuMPAzwhvbFngv2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["recipe_id", 7], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (7)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (1.0ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$Aecdpn9tbHdSkp3oG6yx/uWEUbEMBkVbiwpIHfUrEoapA.McLP60i"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["recipe_id", 8], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (8)[0m
  [1m[35mStar Load (0.6ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 3 AND "stars"."recipe_id" = 8 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 3]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$XoRiXiML3Gh7u3pUV7HzL.vJQFpN4QzqZzHml6A.v.zIaPHZBekRK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.9ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 19.9ms (ActiveRecord: 4.7ms)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$oTwntkC7SAbBNgAVv39mM.6gMhwPZzNy9gU/BsOsdnIP5gtqt4dXS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$XMiEGszE2t3pnVEUo2VCc.3ZjLz0Y68FJN6J60WwMI4FwnSKlBhzC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 5]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (2.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", 10], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[35mSQL (9.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["recipe_id", 11], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 6]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 62.9ms (ActiveRecord: 22.1ms)
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$pvXbt7tNrdD5yG2HYYcTSeAeZeWusbMcLbgT0HRkkUL7x.iBp4Z82"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$zcAS38sAcuz1osM/KrF59O48sFPjihZCl7lu0XiTDY6hVTX7OdWx2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", 12], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["recipe_id", 13], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 8]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 12[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 12 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 12 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 12]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 8 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 13
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 13[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 13
Completed 200 OK in 151.1ms (Views: 137.8ms | ActiveRecord: 4.7ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$m99tUHxNEVBu07iVmB5GceK.6Utq1UKs55kbJXyAxZzfdyxA1hcrG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:44 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.4ms (ActiveRecord: 1.7ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$lISSyW0P/sBAzXHlL4KdVe/xgt/E9wpMu2tCZFiXRcS7QL52dH7BW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["user_id", 10]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$obBORTIXKJHCrsGSFTkUyesTXY0smUo2iKbUMdr8EkR7Qvu5JDTRS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 11 LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["user_id", 11]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["recipe_id", 16], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 16 AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["recipe_id", 16], ["updated_at", Tue, 13 Jan 2015 02:45:45 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 130.8ms (ActiveRecord: 15.1ms)
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 11 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (14.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$TUw1OXDZj5BoPoOfkSOvoei6LVbQ8OoxPqO9KxvmK2UQo0RJxGCy6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$VgERzqjBhT5tHX0ojp507OC6dd4mbLGDKneEHM4tIwbi41tup3Hye"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["recipe_id", 2], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (2)[0m
  [1m[35mStar Load (0.6ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["image", nil], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 3 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.5ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 4 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 5
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (1.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$22Dq05FQSBT.KyfEBT2/wu3gJCqaPy9qHrGk/3..Es3J8WIQtjo3W"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 6
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 7
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$rthlupOgAGf4fwPFAEfUA.4DLgNUOdVckSYyZAu/rdrFGa.gtd.le"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 20.1ms (ActiveRecord: 4.5ms)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$enffUCA0VenTBBSYHe4j2O/VHVyetGreTrCSoRuDXExeDml4tHh46"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$cvZibMArGkAk0q/.VpedmuBG9RUUazT0cgcWq7b3RN3cgFimYsXVW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 5]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", 10], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["recipe_id", 11], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 6]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 53.5ms (ActiveRecord: 12.3ms)
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$/rS35jLAxiRGCXnfoRiJHuQsezhE90RrXFRc.JHwcGeK5C4yCb0YC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (0.5ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$fwsENB.rsuXCLdwWJK3ToeN5GAbKdYgqip8Uc5IsizCqol785X9fm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (2.5ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.3ms (ActiveRecord: 1.8ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$eqK2Ctpr4jboakQ0AS3xMerajqKS60iD3owlMRmwXDwlSACrDuo2W"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$0Syke9otbyzIOWqJ5I3BueJKQR3ZM8M1cSCFOkIvbpcorcimEiUoS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 9]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["forked_from_recipe_id", 14], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 10]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["recipe_id", 15], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:47:43 UTC +00:00], ["user_id", 10]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 14[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.9ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 14 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 14 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 14]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 10 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 15
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 15[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 15
Completed 200 OK in 127.8ms (Views: 112.0ms | ActiveRecord: 5.5ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:47:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$zLwogrV7YYUMmzOpAjSPBe0peHofY84bQEl26cJ9yi708qVSjLCwS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:47:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 11 LIMIT 1
  [1m[36m (1.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:47:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:47:44 UTC +00:00], ["user_id", 11]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:47:44 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:47:44 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:47:44 UTC +00:00], ["recipe_id", 16], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:47:44 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 16 AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:47:44 UTC +00:00], ["recipe_id", 16], ["updated_at", Tue, 13 Jan 2015 02:47:44 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 138.0ms (ActiveRecord: 15.1ms)
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 11 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (22.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$iZwZet6VQfcU6UQtIR4sSeIIF1D0Gz19xQ6wnkSwUgt2ZpReFBgqO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$.vh783j45CaQ6WZ5/do.7ubYdW.oQNaIQPceAV0Pzd5qdqgz7Lt3u"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["recipe_id", 2], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (2)[0m
  [1m[35mStar Load (0.7ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$OusJ0TD6dAgSdaAsuJhI.uZ/jlMViOO7f.MJw8YKGBustknv21HQ2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["user_id", 3]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:57 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (1.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 64.4ms (ActiveRecord: 5.4ms)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (3)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$bhqp6hSrqHl5ZODff4qJiOWjkc/VZxHY.W3v6RzT/vj4wfO8qYBpO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (1.1ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["recipe_id", 4], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 4 AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["recipe_id", 4], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 164.4ms (ActiveRecord: 18.5ms)
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$mVn2wCBzwnDnqV3pSlYMv.oZg7he8Wk/uHuSzLKIN5tApBTqkW6nW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$Ss6nPafZQ1iU19jPVxe.cOFNk1RymBOd6POJpjccnj5XHt15kaGmW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", 5], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["recipe_id", 6], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 25.9ms (ActiveRecord: 10.1ms)
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$5ugpdtpE.Ig0.UZQQPReOOPCxujCg0k3Dv87UcREG3xV82l9rg0Du"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.2ms (ActiveRecord: 1.7ms)
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Jqfy9D3P1vknS7AMBYi7fOeVk6dgdbGHsKfyIIFCPUnsedDr4XUwO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 8]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$6iT8vfYXA73ZT/jKsCbd2uhnwluAmxmHFGazcY24T1ih2q.MJj6/m"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$x0KxQvJ2xfC5kOmkaJ8PuelvebQZ.nTQvWRza1OCEedthLi3yCNse"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (1.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", 9], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 10]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["recipe_id", 10], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 10]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 9
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 9 AND "taggings"."taggable_type" = 'Recipe'[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 9 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "recipes" WHERE "recipes"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 10 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 10[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 10
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 10[0m
Completed 200 OK in 149.6ms (Views: 137.2ms | ActiveRecord: 4.5ms)
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 11[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$BqN/y0YTdmsQZ7SqWr37T.7eJngU.T5y0ZzTKOI3gAF9MkJ/ypBO2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 11]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["recipe_id", 12], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 12[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 13[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["image", nil], ["recipe_id", 15], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.7ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 15 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.5ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:52:58 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.9ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 16 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (13.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$4Fk7wRQ9K0VusZaPvxkdNujkpE.OQZdlujTpmDr/htkZgPAu85TG2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36mStar Load (0.5ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 1 AND "stars"."recipe_id" = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.9ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (2.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$LVcf8vf1JMCL9.ARsloECel8C9G7wWqvh4CQbW0RsRjb1nKAhOyG2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["recipe_id", 2], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (2)[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.5ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.9ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 4
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$H9jp.o.ahMeY5cl5Gr5hVOUsMruiT68wXwBRa01r4OhZB8X8HGEaK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["recipe_id", 5], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 5
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 6
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$69iqaQ1Ngikomae9EJwUpO7GAKkch0chdKzA3mFenW6h4H3gMgKN."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:37 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["recipe_id", 7], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 64.5ms (ActiveRecord: 5.1ms)
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (7)[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$xFSakNkuZkeggvlfUNxjDu1DcxzCxX4E91NQY0QssrJlqcuaxxvbm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 5]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#update as HTML
  Parameters: {"recipe"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
Completed 401 Unauthorized in 6.8ms
  [1m[35mRecipe Load (1.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1  [["id", 8]]
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$nOo3BADvbmrtnNnX1mNzw.nRp2sxGklwlIADWcfTO5uvJgfKnC/L2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$nphIlWL00oXnNOS7UsesLeAZJ.cJ43R39.HIUiMRH/05N3X0No546"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (1.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["forked_from_recipe_id", 9], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00]]
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["recipe_id", 10], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 7]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 53.3ms (ActiveRecord: 13.7ms)
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 7 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$2oVZmTJaVTsmzoUqG02XpehlZjX.81wzahwUHDliXmeJkTI3UHmB."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$eA0mJy6DAUpb4Ssh1Co2X.SLBkRYGTQfj66N8stqkffv3cIo25Gpe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 8]]
  [1m[35mPgSearch::Document Load (0.5ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["forked_from_recipe_id", 11], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["recipe_id", 12], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 11[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 11 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 11 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 11]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 12
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 12[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 12
Completed 200 OK in 50.2ms (Views: 37.9ms | ActiveRecord: 4.7ms)
  [1m[36m (1.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$8gdR71z9vZk.gWhqlZZmzez.nL8kmXMqdAvdPn9vx71U21luzzKbS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 10]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 6.0ms (ActiveRecord: 2.1ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$yxYdDHEDows7SqulXIAm7.xC3vDcPxpVCXA/j4Ki/j4x/TTGuo6rO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 11 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 11]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["recipe_id", 14], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 14 AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["recipe_id", 14], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 136.2ms (ActiveRecord: 13.6ms)
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 11 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.6ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 15 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (2.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00], ["image", nil], ["recipe_id", 16], ["updated_at", Tue, 13 Jan 2015 02:54:38 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.7ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 16 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (24.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["image", nil], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (1.0ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 1 LIMIT 1
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$DIi1g6PGbws2wHNgzcHq5OhLoQyL8sNJnNnxyLxI6wlrxpbhxPIma"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (3)[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$ChxC2Xrrtmxy/3Q/vZ291uqJ.wHGXpl1QcHKbLzfwZ5a8Yvsnv76i"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["recipe_id", 4], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (4)
  [1m[36mStar Load (0.8ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 4 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (1.0ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 5
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$j/Q.A/c9SxlHGCWY.6RnpehL6UTU8IZ.j.85BcBReEXoZap2.qLE."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 6
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 7
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (1.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$3ZThIEqgXskdzZSpy7XMSeG/vq9mwBFA6QiCWiQu.1rfFjfRlAIVy"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 18.9ms (ActiveRecord: 4.8ms)
  [1m[36mSQL (0.7ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$QrPoXUQ9s5nn29zLuEVCv.EHzvAxvZeaL1z8lwocJu5/StxNKQTuG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.3ms (ActiveRecord: 1.8ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$E8gcj7E8KPS3NFElCQgDUe8Ta11gkyJGbjdSWICD9yHd2KtY/epra"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:17 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$flVP/VYPItye9YV2cBrza.bSgmSaliOvPBcA8glRwpUAuayQXE4wS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["forked_from_recipe_id", 11], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (1.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00]]
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["recipe_id", 12], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["user_id", 7]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 58.9ms (ActiveRecord: 13.3ms)
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 7 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$XvpoOmQhPzu4u/PsGlYigeNoNzPTrzschhutFxav1wWHdvqzQp1PC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["user_id", 8]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["recipe_id", 13], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["user_id", 8]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 13 AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["recipe_id", 13], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["user_id", 8]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 142.7ms (ActiveRecord: 13.6ms)
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 8 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$eukzu97ZbMWtVQEPqU7NS.hkLsuqfPf2H7GsFYQcVcOTBLVKKDIVa"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$MgElmjPLE7RcmIMUPAbof.2M22kQVGPZxFTSfZhMso12S95nEFRjO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["forked_from_recipe_id", 14], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["user_id", 10]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["recipe_id", 15], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["user_id", 10]]
  [1m[35m (1.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 14
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 14 AND "taggings"."taggable_type" = 'Recipe'[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 14 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "recipes" WHERE "recipes"."id" = $1[0m  [["id", 14]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 10 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 15[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 15
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 15[0m
Completed 200 OK in 113.6ms (Views: 101.3ms | ActiveRecord: 4.8ms)
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$vlPi7SugHNZ/jBxxGIX87.wTlMtMWLmHic42uEtM/kGDi953waWPi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["user_id", 11]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:55:18 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
Completed 401 Unauthorized in 50.2ms
  [1m[35mRecipe Load (1.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1  [["id", 16]]
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (13.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$fgLDDaBt3Y4I3h2tsg8Q/e.vhT4rqOc4mkbu1O1EBD.8.tMpJrxay"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$VnCig7UU9Bk8ggkg8Qb3Eu.SpGmGMamGe7huynnIIOEXkb7oZeiYm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["recipe_id", 2], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (2)[0m
  [1m[35mStar Load (0.7ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 2]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["image", nil], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 3 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 4 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 5
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$QjIcfBYF8yQTAjg1G4FsTOb3J6HqVRLvwwacmYJDUQaXDMADpPJD6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 6
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 7
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[36m (1.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$llnZUW8TQVjOz9jgFBM2d.QFbktZmejwulx6quafjR9UYTp.vuFv2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 21.5ms (ActiveRecord: 5.0ms)
  [1m[36mSQL (0.7ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$C.VD1O7OgokDxBBm1Krdn.VytJZw0Gb/IABrW0.JqdKxjWOcmN3am"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.7ms (ActiveRecord: 1.9ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$QxE9nFpPguIXevr7Zs6uSukLDZawpTKP432bKvYNhGSiJ1mQjdS3G"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1[0m
Completed 500 Internal Server Error in 6.9ms
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (1.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$GiQQu26TjXVTXMgMZcy99Oj9XasZA1dd20P3oUCMfCi.8kI6GbPVq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$/D5w4zIHqD1Hn3Yt6NUzLuLaSLJn7.Gi.YBOFbi4uNq6XSBAQGFDm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:34 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 7 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["forked_from_recipe_id", 12], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["user_id", 8]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00]]
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["recipe_id", 13], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["user_id", 8]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 52.4ms (ActiveRecord: 12.5ms)
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 8 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$z1kRbN718ra81cxQq.aIxeeG6fNWwt6.6GGhEyPXQaMG6lubplB4u"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["recipe_id", 14], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 14 AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["recipe_id", 14], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 145.8ms (ActiveRecord: 16.2ms)
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$PnjqbJQhgZ4yIpCyFZrIi.rywZO4Frg0gUzeLcvPD5XpINiXTJLza"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$5tVwDHlMem9ppCEbX72aLOn9Ipc7LTpA37B32D5IFUHNXHx3uVk4u"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["user_id", 10]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 11) LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["forked_from_recipe_id", 15], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["user_id", 11]]
  [1m[36mPgSearch::Document Load (1.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["recipe_id", 16], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:56:35 UTC +00:00], ["user_id", 11]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 15[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 15 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 15 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 15]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 11 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 16
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 11 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 16[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 16
Completed 200 OK in 114.1ms (Views: 101.2ms | ActiveRecord: 4.8ms)
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (1.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (9.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:57:32 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$k1iO35EVwzplAJSEdWjtROHbxWhLOAsZKt7K4ToJEL3gbz0nTy4bG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:32 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:57:32 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:32 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:57:32 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:32 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 1 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:57:32 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:57:32 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 74.5ms (ActiveRecord: 6.0ms)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$PZoLTHezA8IuMsu3meuVVe9u0eA..fTLxrF0pfsybGLVpcE.ZUeoW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 2]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 6.5ms (ActiveRecord: 1.8ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$voK4iUW00ejbGkGAuZ.MtewMjXsLfNWU8GkI/3k3ZGdt0Xbjhypae"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$P5Ww9EkUvzy7SzQJdw6nZuvaMgMY8WFqDkzzEXwikSIaQ8Mr2IdQm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 3]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", 3], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["recipe_id", 4], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 3[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.7ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 3 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 3 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 3]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 4
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 4[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 4
Completed 200 OK in 140.0ms (Views: 126.4ms | ActiveRecord: 4.5ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$I.FB/vBeinlDl2YShnNSaedIPNU4aqBl4tlHknHBD3PO/3cxswZ2q"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 5 AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35m (1.6ms)[0m  UPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 02:57:33.402337' WHERE "recipes"."id" = 5
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mUPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 02:57:33.413178' WHERE "pg_search_documents"."id" = 5[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["recipe_id", 5], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 5]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 5 AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["recipe_id", 5], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 5]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 55.2ms (ActiveRecord: 17.7ms)
  [1m[36mRecipe Load (1.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1[0m  [["id", 5]]
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$9pvVSodzn3UBBLL2F3f7.uebwiyIxblE./YQoO3TAg4.EG1TKB9y2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$mOPrLZb0b6yE1OeycLAU.uVkF8poRFP945aBp1bricrEHi6/JW9x."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (1.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", 6], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["recipe_id", 7], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 7]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 26.0ms (ActiveRecord: 9.3ms)
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 7 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$y9TWuZUfm3CUadWUTnTB9OWqRyS2jXpmCCWuUcG8OIpaEd4mrNvbi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["recipe_id", 8], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 8]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 8 AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["recipe_id", 8], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 8]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 134.1ms (ActiveRecord: 10.1ms)
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 8 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (1.1ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$KFb9rEsP5cqplyE0qs2CoOpCZ/KH7TtmOiGqfa4CfZUlHyqxqiE5."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 9
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$F2xUPzZeLbB1Z/db/wdDKuxfP5vOiLoNvwg78liay9WP4KMPjeV0O"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["recipe_id", 10], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 10]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 10[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (10)
  [1m[36mStar Load (0.6ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 10 AND "stars"."recipe_id" = 10 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 10]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 10[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["image", nil], ["recipe_id", 11], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (1.9ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 11 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.6ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 12 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 13[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$LO6cc5epIaDHR6jwocVguuRE3E3gvOexWX8XtVqxrrBv8oL6WxUpq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 11]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["recipe_id", 14], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 14[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (2.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 15[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:57:33 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (15.2ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.1ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$NpF/9/xG7O0DSVCJ2b1O5uC33PHCWsq68GlqBzyZ1R4j9ng5v1txS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", 1]]
  [1m[35m (1.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (1.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (1.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00]]
  [1m[36m (1.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$TmcVuZcxx8M2VQaZb5jmNODZSU6sygYTP5Nw/F5K6a/U58Twoo3MK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["recipe_id", 2], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (2)[0m
  [1m[35mStar Load (0.7ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 2]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (1.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["image", nil], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.7ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 3 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.4ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 4 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 5
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$naOBigsVR3hWC4pbuyoaBOdMQ44ei8ZER6kL8T5dCJue28MINiD8W"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 6
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 7
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$nQqT1bdi2Uc/0CnUhmnwV.AUjcRwQIolhqKgWd6ghw5xUh6GYWdJS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:02 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 19.7ms (ActiveRecord: 4.6ms)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$IOceXt.ldULoKIztrBjQU.lAXSEdfbbrRzLZGA1KQ5n2EppKj099G"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$MimI9EQh3ZDLF59wIPl5DuFBinfdedXDa9pBINWoFO0YjbYrfkWTK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 5]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["forked_from_recipe_id", 10], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00]]
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["recipe_id", 11], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 6]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 10[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 10 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 10 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 10]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 11
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 11[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 11
Completed 200 OK in 152.6ms (Views: 139.2ms | ActiveRecord: 5.4ms)
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$eIz7S.33Lva22TFqDymaD.lD7DQl6wAPjo2ds10KAkeLBfyixcnnO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (1.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 7 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 12 AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35m (0.8ms)[0m  UPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 02:59:03.376674' WHERE "recipes"."id" = 12
  [1m[36mPgSearch::Document Load (1.5ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mUPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 02:59:03.390885' WHERE "pg_search_documents"."id" = 12[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["recipe_id", 12], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 7]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 12 AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["recipe_id", 12], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 7]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 58.2ms (ActiveRecord: 18.6ms)
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1[0m  [["id", 12]]
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$7B/L6d6eJ9aYQpf1lsrA4uVqVV4V1SxFFFcpC7XYu/fgvXXdS.phm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$91iKhWmsCzbt8MZeNbKRQOfsyfbwbd4rN1mTkLaOv00NFoRyGBMM."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (1.1ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 8 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["forked_from_recipe_id", 13], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 9]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["recipe_id", 14], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 31.0ms (ActiveRecord: 10.6ms)
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$i88uQW2YdO5TWeW/CCL/Ie7M8KpPWZM/AIAKpaIGI5EMGBzkCdIOe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 10]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.0ms (ActiveRecord: 1.6ms)
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$E7xsGIqGb.54x.EnPbzbPesqzw6DZd4JNI7IfBBjOFzkbZ3jgmfP."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 11 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 11) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 11]]
  [1m[36mPgSearch::Document Load (1.3ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["recipe_id", 16], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 11]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 16 AND "recipes"."user_id" = 11) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["recipe_id", 16], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 11]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 131.5ms (ActiveRecord: 11.4ms)
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 11 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$JUaB/7KGvYtT2SlmF6YwRO1cE98ZwYPsVOlFceZG5c/ofD5a44CS2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 12 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 12) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 12]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 17 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 17 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["searchable_id", 17], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["recipe_id", 17], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 12]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 17 AND "recipes"."user_id" = 12) LIMIT 1
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["recipe_id", 17], ["updated_at", Tue, 13 Jan 2015 02:59:03 UTC +00:00], ["user_id", 12]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 38.5ms (ActiveRecord: 14.6ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (7.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$eojEIddLm1dthpr8XRgLA.Nvzh0VpUteu7QfsKywOJzPcqrFK/W/2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 1 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 74.4ms (ActiveRecord: 5.7ms)
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$MT1CjRTHo7zKcnASTBa1ROKbKm3eSl/H7xupFW6f9JsXOmL3TBbkm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["user_id", 2]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 6.1ms (ActiveRecord: 2.1ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Wllk8noZu7x7.zMhjcOc5ec3wMVGm71cJORyfDe5pR1tAasd5bG.a"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$jNqAqD7lpCrrwQtAVmOJ3O0Ggr83tXU9aV.ecGGF9MNdsWZ2F7fS2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["user_id", 3]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["forked_from_recipe_id", 3], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00]]
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["recipe_id", 4], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:44 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 3[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.7ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 3 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 3 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 3]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 4
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 4[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 4
Completed 200 OK in 139.4ms (Views: 127.4ms | ActiveRecord: 4.2ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$taOXwFgtlU0yxNwwtrZhw.ezS69/mBRedMK0J854TIbsb0gVXqKg2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 5 AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35m (1.3ms)[0m  UPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 02:59:45.114791' WHERE "recipes"."id" = 5
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mUPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 02:59:45.126284' WHERE "pg_search_documents"."id" = 5[0m
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["recipe_id", 5], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 5]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 5 AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["recipe_id", 5], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 5]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 54.4ms (ActiveRecord: 18.1ms)
  [1m[36mRecipe Load (1.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1[0m  [["id", 5]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$xfcCkaQxOx0MRmmLidASOuxbSKuJTTp4Bdk2iCwCEhD/KQVVg5y12"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$EuPBfF3BK8sBhYR6fgMh1eYS3360qA3Imi1GfxexlfsFpJ1zMT7dC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1[0m
  [1m[35mUser Load (1.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", 6], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["recipe_id", 7], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 7]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 29.9ms (ActiveRecord: 9.6ms)
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 7 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (1.2ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$o8dYpw1r8Rk3C.HQzJ0gl.bDM2ETfEOh1dWy9Re/32pdB1uSWus8C"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["recipe_id", 8], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 8]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 8 AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["recipe_id", 8], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 8]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 132.1ms (ActiveRecord: 11.2ms)
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 8 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$gyoGFuJ8I5UItcqDMrc70.o2ZiGQoGvQ.ztaH.wqW3mW8/GiDP5QK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 9]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["recipe_id", 9], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 9 AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 32.7ms (ActiveRecord: 12.6ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["image", nil], ["recipe_id", 10], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.7ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 10 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.6ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 11 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$wAA9RvMR3CCmQW1pwcyMzumnQjdn6Yi1k1WqHafI7fjWZYVRA6H.u"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["recipe_id", 12], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 10]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 10[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (12)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$mWUb.MRvmvuoFBJNj637Se/JZpYLr2fT3k1GJAaZ1yLyiqKPHOFnG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["recipe_id", 13], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 11]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 11
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (13)[0m
  [1m[35mStar Load (0.6ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 11 AND "stars"."recipe_id" = 13 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 11]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 11
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 14[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$AocaCMo1W4NMXie/fBuDiu6HnIkLQYUtb9Y45quaynp4fC07nqK.C"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 12) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 12]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (2.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["recipe_id", 15], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", 12]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 15[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 16[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.5ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 17 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 17 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00], ["searchable_id", 17], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 02:59:45 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (15.2ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 1[0m
  [1m[35m (4.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$tn/WuTWHgNTmuYfd0cViYuGnzlZtwpTlY5fejW29zq8836tupWKbW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["recipe_id", 2], ["updated_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 2[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:32 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 3[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$uC8VHdj.1VsPFJXjBmQpueleUYyvxncPjaDm8B.kf5fYIeJxRAOsq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 2]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 2 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 5], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 67.6ms (ActiveRecord: 4.5ms)
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (5)[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$FuLEOgYabpdhTifWhnniJu2wkpDLg1LApY9cF6U.9eHF73wMcZyBe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$gQfrwDVC9syvWcTpE3IDc.y7bYLtoSZeA6epLsm4cG6Q9oADhXz8W"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", 6], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 7], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 6
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 6 AND "taggings"."taggable_type" = 'Recipe'[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 6 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "recipes" WHERE "recipes"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 7[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 7
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 7[0m
Completed 200 OK in 145.4ms (Views: 133.0ms | ActiveRecord: 4.6ms)
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$J.chAV3y/ktUOTS1d8429OAFFzac850WdZAwm6/YU5bETvyy8CH4q"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 8], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 5]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 8 AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "created"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 8], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 5]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 137.1ms (ActiveRecord: 13.6ms)
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$zKJzzWJjy9EEUNBYfdX.FeBuGEXG2mJdkmjC9SDaqslPtNSrtrZgq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 9], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 9 AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 33.9ms (ActiveRecord: 11.7ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$37iRx/r/UpyVLDNkkEfHj.NEC27GLcU85zOtt/YEvdIVJff3HSgYS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 7]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.4ms (ActiveRecord: 1.7ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$3XZ3.4B9c2HPwsFd6wTnOOKX2r.Aksra5PSO741PI3kGXW3yGE29W"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 8 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 11 AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35m (0.9ms)[0m  UPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 03:00:33.796045' WHERE "recipes"."id" = 11
  [1m[36mPgSearch::Document Load (2.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mUPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 03:00:33.806547' WHERE "pg_search_documents"."id" = 11[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 11], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 8]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 11 AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 11], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 8]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 41.2ms (ActiveRecord: 15.8ms)
  [1m[36mRecipe Load (1.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1[0m  [["id", 11]]
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$6ebSv6q/b1YisqpgYyZ1WO2J2bPQryldyHsiJodeemdkwb1999bbG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$uAomUaO.a0It7b8hU0foC./n3j8d.6L4MQVmYDKhNs7fb9kTzzkXK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1[0m
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", 12], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 10]]
  [1m[35mPgSearch::Document Load (1.1ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 13], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 10]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 32.4ms (ActiveRecord: 10.7ms)
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 10 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$2OggOELv8qtghD8dgqvSbe3Ut4SiRn5z0YUThdjmAtf6dJkN2ENci"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 14], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 11[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (14)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$.7NtdPbSr.9ETOOovfms9OIeEZlglP5oQzMF0453aLlvuiLrbJQ9i"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["recipe_id", 15], ["updated_at", Tue, 13 Jan 2015 03:00:33 UTC +00:00], ["user_id", 12]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 12
  [1m[36mRecipe Load (1.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (15)[0m
  [1m[35mStar Load (0.7ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 12 AND "stars"."recipe_id" = 15 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 12]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 12
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.8ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:34 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:00:34 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:34 UTC +00:00]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:00:34 UTC +00:00], ["image", nil], ["recipe_id", 16], ["updated_at", Tue, 13 Jan 2015 03:00:34 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.7ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 16 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:00:34 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:00:34 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 17 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 17 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:00:34 UTC +00:00], ["searchable_id", 17], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:00:34 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.7ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 17 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (7.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$z1haqSTTgZH/WbXma5OBtenGnmsv9dbrAqdkRbkUyZAu0tQ3x0s5O"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (1.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 1 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 77.0ms (ActiveRecord: 6.8ms)
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (1.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$0lPlswkRV3emSlMrA6jHcu2hF2w0XUddWL1Kf8qSZrRmrUQq8O9Qy"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["username", "foo"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$YabbvmRsyTN4QVa6JIjww.ScJHvSuDUZVJF38kmymTp.idwrQnbcO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["user_id", 2]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["forked_from_recipe_id", 2], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00]]
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["recipe_id", 3], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 2[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.7ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 2 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 2 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 3
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 3[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 3
Completed 200 OK in 118.3ms (Views: 105.9ms | ActiveRecord: 4.5ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$cJGiYOiFmFXs3fXnKzQZyegFlXUaLZ2KfYTjBQRb3e9vxDvhdjq6q"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$Y81AYJYyTLBpz51t/oNl4OyXhgWFhKc6LXFQBzLSMAZ8AyiDHSGly"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["forked_from_recipe_id", 4], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (1.1ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["recipe_id", 5], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:40 UTC +00:00], ["user_id", 5]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 26.3ms (ActiveRecord: 9.2ms)
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$PBuCo2cYCS8UkPcTkGoN2u1YdFBaDtwAy/6Ql3UyUNH4GyZ.PZUi2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 6 AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35m (1.9ms)[0m  UPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 03:01:41.033459' WHERE "recipes"."id" = 6
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mUPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 03:01:41.045872' WHERE "pg_search_documents"."id" = 6[0m
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 6 AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["recipe_id", 6], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 56.4ms (ActiveRecord: 18.7ms)
  [1m[36mRecipe Load (1.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1[0m  [["id", 6]]
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$CXcBOuJ7XYlXhUvYrst6a.sEB5jP3nlPuw/xSY52MjJ.bLAj413ie"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.5ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 6.2ms (ActiveRecord: 1.8ms)
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (2.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$74YI0.LQmUXYOzbt1dKPYuHAbrC/2FwFEyi68iAwTOjnfGZ0s7Sta"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>""}, "user_id"=>"foo"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 122.8ms (Views: 14.9ms | ActiveRecord: 2.4ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$qvmKbsvGjkyy0Sy7ZhRRZeJMnJ.gI23EPIb//XSkBPdpuq8pzbuuG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = '' AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 8.3ms (Views: 1.5ms | ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$azWNSh/ZEPyZYHXZz0gosewRCD/eRyqLe6Wd7WAuaBs8mdEjY7/IW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 10) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 10]]
  [1m[36mPgSearch::Document Load (1.5ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["recipe_id", 8], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 10]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 8 AND "recipes"."user_id" = 10) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "created"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["recipe_id", 8], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 10]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 37.0ms (ActiveRecord: 14.1ms)
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 10 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (1.0ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$3yWvdZCcxruXcNNSSr9KfOq0Yvf.3hyhb7bHXeP6oD3VVt2AbIxeC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 11]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 11
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$Qf1PLsoNlpwUPVXrAk3HIu0pNvWRmu0WHpxcuSXQYfZO00kS2ijWm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["recipe_id", 10], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 12]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 12[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (10)
  [1m[36mStar Load (0.7ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 12 AND "stars"."recipe_id" = 10 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 12]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 12[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 11
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$rI/GLufcLiiiy90qmZ7CgOX3fi2A.Jx.txfquTOGeEKuEj/uYiRr6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 13) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 13]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (2.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["recipe_id", 12], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", 13]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 12
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (1.0ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 13
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.6ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["image", nil], ["recipe_id", 15], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.7ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 15 LIMIT 1
  [1m[36m (1.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:01:41 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.8ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 16 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (2.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (22.2ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:03:54 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:54 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[35m (1.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (6.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$QDo3n24SfOe3fbuAOibvNul3APpNQp3F731jUUW3uQEmuA1tpic1m"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["recipe_id", 2], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 2[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 3[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$PaV.xoEcizo/Pp81LBUVFevlnc29K.y.ROsSzNufUVUjF7yDFwlDm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 2]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 2 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["recipe_id", 5], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 65.5ms (ActiveRecord: 4.5ms)
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (5)[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$bizkA6onAWhgNsnnCbsQdeu4aSLeJTIS1QXy4o41TKCTiIVRrsxji"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 3]]
  [1m[35mPgSearch::Document Load (0.5ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 6 AND "recipes"."user_id" = 3) LIMIT 1
  [1m[36m (2.4ms)[0m  [1mUPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 03:03:55.480654' WHERE "recipes"."id" = 6[0m
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  UPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 03:03:55.492343' WHERE "pg_search_documents"."id" = 6
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 6 AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["recipe_id", 6], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 79.0ms (ActiveRecord: 21.7ms)
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1  [["id", 6]]
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$g/8H3HG3DfeeWedMEv4c0.XG/noP6VNigB9dtJP1Mth5Yyhwbx8wO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$r0pMjcAhdUHYjKu5F50mlurnY55swCMhFSAQV2c0XZES3X/0d36Tu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (1.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["forked_from_recipe_id", 7], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["recipe_id", 8], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 5]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 30.3ms (ActiveRecord: 10.5ms)
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (1.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$sp/AGC/.CVjqzq2KSUHAfuAy/ZAG8X7W/LsDvaIX/Sblu9NzzlQpm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["recipe_id", 9], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 9 AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 124.3ms (ActiveRecord: 10.1ms)
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$5.U24IAp6yTNJertKXV.h.gfCF3103ZY247J53naB9svqvknQEboG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = '' AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 151.5ms (Views: 143.4ms | ActiveRecord: 2.6ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$3P8CTD0flOPLlP7ERglMOu3d0W9YsvkxGcuBt1bSf/3k65C98rNLW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$we.Q.UM261zOGVUhWThF0.AQ6ezyNNq0D.uUcMsM/G1EBhkqhnyYm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 8]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["forked_from_recipe_id", 10], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (1.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["recipe_id", 11], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:55 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 10[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.9ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 10 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 10 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 10]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 11
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 11[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 11
Completed 200 OK in 29.1ms (Views: 15.6ms | ActiveRecord: 4.7ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$yaiBlhOhPUo9Pzrxz/JZBevq1F/z0qzIUiZFwpHZhKSm2QfRHyzwC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["user_id", 10]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.8ms (ActiveRecord: 1.8ms)
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (2.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$G0j2z3Hnq2nXwv4so1ftSOq0C9NVBRIJQuSSr7ZSdn8bbrboj/u3S"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["recipe_id", 13], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["user_id", 11]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 11
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (13)[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.1ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$w3JjM8c1atCTIwC/QTKzKOhzszjy/r10iLKMGZAQOdGW3c21MdVPi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["username", "foo"]]
  [1m[36m (1.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["recipe_id", 14], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["user_id", 12]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 12[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (14)
  [1m[36mStar Load (0.7ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 12 AND "stars"."recipe_id" = 14 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 12]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 12[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["image", nil], ["recipe_id", 15], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.7ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 15 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:03:56 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.5ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 16 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (8.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:05:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Bl2aTeWHtGp7kfb6QBHnp.8cAXTYHF6WBW2y5FtvZ4n571tzYgjQS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:05:43 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:43 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:05:43 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:43 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 1 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 76.6ms (ActiveRecord: 6.6ms)
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$bbJhDHMlG/mKj9uHPItFc.iD6BlbFgIa6d.ER5vauJNbti3ineijq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 2]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.6ms (ActiveRecord: 1.9ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$FkAqE4rSPLFl4jdDuDnsB.RSvczLr4SbsuUQK2fCS/hFAqUCa7Uj2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$ACfkr15CtImP6da.orEbMOeRNdp18TuQzvPkWY4mh.xRoY60KiNPa"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 3]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (2.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", 3], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[35mSQL (2.2ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["recipe_id", 4], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 59.5ms (ActiveRecord: 15.5ms)
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Bwd6usBcm0YxSq3W4yPU2e91hdHCIv4Nqe0oy0Dfz3Z7GwX1VhAw2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
Completed 500 Internal Server Error in 3.1ms
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Plp40EfTdnLLEXB2a.Zx0.zxPLzOBBu4H24I8Th9w7fwZI2FGRrvq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 6]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["recipe_id", 5], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 5 AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["recipe_id", 5], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 147.0ms (ActiveRecord: 14.2ms)
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 LIMIT 1[0m
  [1m[35m (1.2ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$iM9v0m3cn/9CNcALJwqHUu1sTSsIeU/8yCJhlFPaFbkZoVgatJi8G"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 7 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 6 AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36m (0.8ms)[0m  [1mUPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 03:05:44.538459' WHERE "recipes"."id" = 6[0m
  [1m[35mPgSearch::Document Load (0.9ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  UPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 03:05:44.547899' WHERE "pg_search_documents"."id" = 6
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 7]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 6 AND "recipes"."user_id" = 7) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["recipe_id", 6], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 7]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 42.3ms (ActiveRecord: 13.9ms)
  [1m[35mRecipe Load (1.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1  [["id", 6]]
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$epcQP3D3Pptxb.RLVLslgOFj9KGtn7IIvIcY9ILSfZ6iBzKg9GZa."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$1ICCvOxdJdeZc/CbJIxW1e55ise1LDRUmOuY8vKi/FGGmNFHpc8NS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 8]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", 7], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["recipe_id", 8], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 7[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 7 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (1.2ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 7 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 7]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 8
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 8[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 8
Completed 200 OK in 156.0ms (Views: 142.5ms | ActiveRecord: 4.8ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 9 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["image", nil], ["recipe_id", 10], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.5ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 10 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[35m (1.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 12
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$4e6WgJ7fias5wglZdIQOmeSFVgpsjrEzdRRjopvYsAA0wFAhn/fZC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 10) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:44 UTC +00:00], ["user_id", 10]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["recipe_id", 13], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["user_id", 10]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 13
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (2.4ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 14
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$wxSxPrZ5xRg8XizlrEwAQue39sgNuYyxSkwDW2bBQlcsYqqjvPgAi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["recipe_id", 15], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["user_id", 11]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 11
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (15)[0m
  [1m[35mStar Load (0.7ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 11 AND "stars"."recipe_id" = 15 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 11]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 11
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$Rg8Alqku3E/SaY7SBG1HQu1qsGIjBNkkDibR3SfeSXPHPiTZRLESu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["recipe_id", 16], ["updated_at", Tue, 13 Jan 2015 03:05:45 UTC +00:00], ["user_id", 12]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 12[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (16)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (7.2ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:06:36 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$4wL1tfZdzP7BgK4Q9ZQoTuwbNDJvtckz3Tyz3FGXJIx.qWNmi6TWa"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:36 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:06:36 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:36 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:06:36 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:36 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 1 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 78.8ms (ActiveRecord: 5.9ms)
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$HHUiWY26AkEfN1r.MqvB8esbgY5xbjcox/8.N.3q.gfXWCUmsPF36"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["username", "foo"]]
  [1m[36m (1.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$jCe8PjqPYeibNKSEYl9Yw.PPAWrXclBHO6TSvLCmu7o4.FGpfC9rq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 2) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 2]]
  [1m[35mPgSearch::Document Load (1.1ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (1.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 2 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", 2], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["recipe_id", 3], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 54.3ms (ActiveRecord: 12.8ms)
  [1m[35mRecipe Load (1.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 3 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$yfE9cAFNtBVPRVw5SdoLkuc8SLBoOw/sufstW4ePrhNHyFDXuiAqS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 4]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 4 AND "recipes"."user_id" = 4) LIMIT 1[0m
  [1m[35m (2.4ms)[0m  UPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 03:06:37.292552' WHERE "recipes"."id" = 4
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mUPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 03:06:37.305187' WHERE "pg_search_documents"."id" = 4[0m
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["recipe_id", 4], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 4 AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["recipe_id", 4], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 4]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 56.0ms (ActiveRecord: 18.4ms)
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$v0oE7Z3x/Q9BGE7qu2Xf8efsJwhFgMJ9Ng.ltQ0pgFwildeR9fs5W"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 5]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mRecipe Load (1.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 6.0ms (ActiveRecord: 1.9ms)
  [1m[35m (1.2ms)[0m  ROLLBACK
  [1m[36m (1.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$/LXrfIfvwEn2zOGkeXhoe.68K0od6T86FtxzJF0VSI6Rn9leL4YOO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$h/Q8SKPmvP6IelLz6H8UtO/jUiky98rBUNW0AwYlMT8AUP3xNKWcu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", 6], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["recipe_id", 7], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 7]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 6
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 6 AND "taggings"."taggable_type" = 'Recipe'[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.7ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 6 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')
  [1m[36mSQL (1.8ms)[0m  [1mDELETE FROM "recipes" WHERE "recipes"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 7 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 7[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 7
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 7[0m
Completed 200 OK in 156.5ms (Views: 144.0ms | ActiveRecord: 4.5ms)
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$TyGi/LO2FlXS1Px3UfBYBeCxFOOtLMVW3kIgVPsd/yvS.lSnSHn/q"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"body"=>"foo", "commit_message"=>""}, "user_id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1[0m
Completed 500 Internal Server Error in 3.2ms
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$TwweeTQNHskSqvMtTldR9.RU9SBxwruHOCDF57IWhVyiPaTL8u/72"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["recipe_id", 8], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 8 AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "created"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["recipe_id", 8], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 9]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 132.0ms (ActiveRecord: 9.9ms)
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 9 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (1.2ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["image", nil], ["recipe_id", 10], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.4ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 10 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$4fxia4KRsBIzMnzy4n.0veFMpoRI0B0dul2w8a.Pv0aD4hILFSvMq"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["recipe_id", 11], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 10]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 10[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (11)
  [1m[36mStar Load (1.4ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 10 AND "stars"."recipe_id" = 11 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 10]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 10[0m
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$0kOWFQWIdZNxcXQKPaF/Heez2BZEq7q/YOuqMzFOMf0l9isFijKrK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["recipe_id", 12], ["updated_at", Tue, 13 Jan 2015 03:06:37 UTC +00:00], ["user_id", 11]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 11
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (12)[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.0ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 14
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$9SQ1oLx2UTAloXmNBdcWSOIdY2Qnq.9yVqA83w/TIzC9JGU6Graj."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 12) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["user_id", 12]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["recipe_id", 15], ["updated_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["user_id", 12]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 15
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (1.0ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:06:38 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 16
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (15.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.1ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (1.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 2
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$9flXEpZOZoDbBjy7qgI2fOGNBiRcJfpnhdtysFjq1o3q5sD4klRxm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["user_id", 1]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 3
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 4
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:22 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.7ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 5 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["image", nil], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (1.0ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 6 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$JWKltH4KVizFehNozkvyiuwp37MSZnyaXD2Hu9GPLixNlvIemTUZe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["recipe_id", 7], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (7)
  [1m[36mStar Load (0.7ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 7 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$0iff7nTqx9jyinykV904DuonoABU8wQxF3WX2XvlNvtmUkhmt7HQO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["recipe_id", 8], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 3
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (8)[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$Gugjg/hbf9Rto9i/mCqqT.mHfyXJ8e//rxap6WFRm2BAC3geICuau"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 19.9ms (ActiveRecord: 4.5ms)
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$32iZGMGKDgrt3bPzLz54QeHwCoguLsCHcc7GQEOlLsH.2Z3Susxg."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>""}, "user_id"=>"foo"}
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 202.1ms (Views: 98.2ms | ActiveRecord: 2.7ms)
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$V74hnzdiR8CcZzQwujcSo.J9.q.obnFkd8c5jtwwDOywltfJ8Ddey"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["recipe_id", 10], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 6]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 10 AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "created"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["recipe_id", 10], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 6]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 108.8ms (ActiveRecord: 16.9ms)
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$wRh62bJHVLiKRQkZA7QoJuduYDY4hZdTdX997JbZu.ix/66w9Iz6C"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (1.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$XponqfDUmbZ848F6hllcDOtsvgWXIwBejwQ1buFxfP3E1tnQpFAmm"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.9ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", 11], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["recipe_id", 12], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 8]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 11[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.8ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 11 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 11 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 11]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 8 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 12
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 12[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 12
Completed 200 OK in 27.0ms (Views: 14.7ms | ActiveRecord: 4.3ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$KJxghTNHG0arqw0jK.sU1uqen9dRhkXuthq8OUh48/Ikrit/YQRTW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 9]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 13 AND "recipes"."user_id" = 9) LIMIT 1[0m
  [1m[35m (0.9ms)[0m  UPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 03:07:23.787098' WHERE "recipes"."id" = 13
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mUPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 03:07:23.797557' WHERE "pg_search_documents"."id" = 13[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["recipe_id", 13], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 13 AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["recipe_id", 13], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 44.1ms (ActiveRecord: 14.5ms)
  [1m[36mRecipe Load (1.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1[0m  [["id", 13]]
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$ESNpctM50SskDUUxYvB0jOZLgIeBLZ7xzmD.C2RF949tgP2Sg9sk."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$cuAFdRHzg4wiUoJ/LVPTm.4bd0btPiCsv4OKAnc8nSFuPFr1Zs.Qi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 10]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 11 LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 10 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 11) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", 14], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 11]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["recipe_id", 15], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 11]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 29.7ms (ActiveRecord: 10.8ms)
  [1m[36mRecipe Load (1.2ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 11 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$L43y9FFJbK0EeI3J4bgJCuHrq3CA729/FX.KWikJzfSTmVTfg9vhK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 12) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["user_id", 12]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:23 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mRecipe Load (1.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 12 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.7ms (ActiveRecord: 1.8ms)
  [1m[35m (0.6ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (8.3ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$GRia3dCRKbwcBlWJ4IkW5ukkxOrNdDXQaeg9E/hQhtiqs93M3nCaG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 1) LIMIT 1
  [1m[36mSQL (5.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["user_id", 1]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 1 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 77.6ms (ActiveRecord: 5.9ms)
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (1)
  [1m[36m (1.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$dcwUvB/J7mINz599tAMl4uu1vgLxIeHyRfq8bVUTyyzrmUguUCHru"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 2) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["user_id", 2]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["recipe_id", 2], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 2 AND "recipes"."user_id" = 2) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["recipe_id", 2], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 173.6ms (ActiveRecord: 18.2ms)
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 2 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$v5DRC9CvWSmeZR8XB.FOTOXdB3rw/3z27eBCNmn9FQWc3fA2Srb.m"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>""}, "user_id"=>"foo"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 113.3ms (Views: 105.8ms | ActiveRecord: 2.3ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$z.xOT6AAfAYR1HWmBkXW9ud5NjU9vfXi9q2nHI9dcwK5JbMZ7hEOK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$ylfTYetogQJxLO/kcDLI0OWLcJCqqT8OMeT2gdjkTTEbscnkAtGl."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["forked_from_recipe_id", 3], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["user_id", 5]]
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["recipe_id", 4], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:07:59 UTC +00:00], ["user_id", 5]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 3[0m
  [1m[35mActsAsTaggableOn::Tagging Load (1.6ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 3 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 3 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 3]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 4
  [1m[36mRecipe Load (0.5ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 4[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 4
Completed 200 OK in 29.1ms (Views: 16.4ms | ActiveRecord: 4.8ms)
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$i6/zHqsY7kIKhjzh297ibOWOKgyhw1zurAdA1BAE5YVfuRJeEDZ9S"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (2.1ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 5 AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35m (0.7ms)[0m  UPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 03:08:00.089358' WHERE "recipes"."id" = 5
  [1m[36mPgSearch::Document Load (0.8ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mUPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 03:08:00.098072' WHERE "pg_search_documents"."id" = 5[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["recipe_id", 5], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 6]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 5 AND "recipes"."user_id" = 6) LIMIT 1
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["recipe_id", 5], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 6]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 40.4ms (ActiveRecord: 14.0ms)
  [1m[36mRecipe Load (1.3ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1[0m  [["id", 5]]
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$9S03xvAXoRUBj9fhubuqRetzkOz2ymxdvwzRggIihtzRuq9Rv0GTe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 7]]
  [1m[35mPgSearch::Document Load (0.8ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#random as HTML
  [1m[35mRecipe Load (1.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.7ms (ActiveRecord: 1.8ms)
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$OdAGnAQKA46KZsNslAog1enDVbVAf5JX9Xtj2CuA9Xzk9j2lE5eqS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$b4uurGBg3r2mwnuDoccyJujEeuiF7.eDnqbZNQLWSG7C2ZDCngGiO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["username", "baz"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 8]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 8 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", 7], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 9]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["recipe_id", 8], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 25.8ms (ActiveRecord: 9.1ms)
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 ORDER BY "recipes"."id" DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$Qhe3dZpAShIMdoBIu/F/OOx7PGq4L48PvmV9jm7dRsR9/jqR7R8VW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 10]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (3.8ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 10[0m
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (3.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.3ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (1.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$VlPQlLnDNvbTbSTLRJ9KVuQIIp6bt7to.tFHEiICBalUw58j5Y/Dy"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["username", "foo"]]
  [1m[35m (1.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.1ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["recipe_id", 10], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 11]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 11
  [1m[36mRecipe Load (0.9ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (10)[0m
  [1m[35mStar Load (1.0ms)[0m  SELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 11 AND "stars"."recipe_id" = 10 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "stars" WHERE "stars"."user_id" = $1  [["user_id", 11]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 11
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE 1=0[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (2.3ms)[0m  [1mBEGIN[0m
  [1m[35m (7.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.9ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (4.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 11[0m
  [1m[35m (4.1ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$ItsXD4toh6X1TLXhmepqn.wGcFSGeownD5TC1wrauMSjvf/ujKXkS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.0ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 12) LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 12]]
  [1m[35mPgSearch::Document Load (1.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (2.1ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[36m (2.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["recipe_id", 12], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", 12]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.1ms)[0m  [1mSELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 12[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (4.0ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 13[0m
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.1ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36m (0.6ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL
  [1m[36m (2.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["image", nil], ["recipe_id", 15], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[35m (1.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (2.2ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 15 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.5ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:08:00 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRecipeImage Load (0.9ms)[0m  [1mSELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 16 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (7.1ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:08:43 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$JOO/RLJywMkbEo09OccmeOCzndVb3Guq61HVvkUnMYeEq3MkfSfiC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:08:43 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>""}, "user_id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 13 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 13) LIMIT 1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered recipes/new.html.haml within layouts/application (0.7ms)
Completed 200 OK in 319.8ms (Views: 104.6ms | ActiveRecord: 2.9ms)
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (6.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (8.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:10:11 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$IqZF048a9scWvvp6z0M4Xe4.8TTKC9PaYdpKLZIqXF5Ku.qSYQDDO"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:10:11 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>""}, "user_id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 14 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 14) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  Rendered recipes/new.html.haml within layouts/application (1.2ms)
Completed 200 OK in 843.2ms (Views: 302.7ms | ActiveRecord: 3.2ms)
  [1m[36m (5.5ms)[0m  [1mROLLBACK[0m
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (1.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (15.4ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (1.2ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 1 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.8ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 1 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 1], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "recipe_images" ("created_at", "image", "recipe_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["image", nil], ["recipe_id", 1], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.6ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 1 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 2 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 2], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRecipeImage Load (0.7ms)[0m  SELECT "recipe_images".* FROM "recipe_images" WHERE "recipe_images"."recipe_id" = 2 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 3 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 3], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$ict1f6ZznEC6uVTifhGbWuet4ylzUJ0K5BIxxSR2FdYBM01wn8Eo."], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["recipe_id", 3], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  SELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (3)[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (1.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "baz"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", nil]]
  [1m[36mPgSearch::Document Load (0.6ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 4 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 4 LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo baz"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 4], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'foo@bar.com' LIMIT 1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "foo@bar.com"], ["encrypted_password", "$2a$04$8zUdQ4.dTusHLQvOcx7s0OA0NabLJgwyEvT6PWgOkp48gDeYzCrLu"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"[0m  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["recipe_id", 4], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (4)
  [1m[36mStar Load (0.6ms)[0m  [1mSELECT "stars".* FROM "stars" WHERE "stars"."user_id" = 2 AND "stars"."recipe_id" = 4 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "stars" WHERE "stars"."user_id" = $1[0m  [["user_id", 2]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 2[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE 1=0
  [1m[36m (1.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 5 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 5 LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 5], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 5
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$VHoqnClh0XnioNsP/MVdTe.VShP4MDGwB1Zw9ar9pXh9Vk9nNWfhi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" = 3) LIMIT 1[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", 3]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 6 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.6ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 6 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 6], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["recipe_id", 6], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", 3]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 6
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (1.2ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 7 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 7 LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 7], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 7
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "blah"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", nil], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", nil]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 8 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo blah"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 8], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" IS NULL AND "recipes"."user_id" IS NULL) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" IS NULL[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$jB5yg7WQS5rqon8wEZGnZ.o5IcrwGVN7q0Stk7l9xpYOyvpJPkNn2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 4) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", 4]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 9 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 9 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 9], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#star as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (1.1ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 4 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "stars" ("created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "user_id"  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["recipe_id", 9], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", 4]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 20.2ms (ActiveRecord: 4.5ms)
  [1m[36mSQL (0.5ms)[0m  [1mSELECT "stars"."recipe_id" FROM "stars" WHERE "stars"."user_id" = 4[0m
  [1m[35mRecipe Load (0.5ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" IN (9)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$4hrcCXkr/mYmfQuzZlbM1ORkZo1dNZUsOPSLPLq2/VUPMQVTwSFla"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$4hadhCHwHb3f0DIbf4oNpOimcgo4zWO29GSvFzDB8xofLIRGordyW"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 5) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", 5]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 10 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 10 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 10], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#fork as HTML
  Parameters: {"user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 6 LIMIT 1
  [1m[36mUser Load (2.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 5 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["forked_from_recipe_id", 10], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", 6]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 11 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 11 LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["searchable_id", 11], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00]]
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["recipe_id", 11], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["user_id", 6]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/baz/recipes/foo
Completed 302 Found in 55.6ms (ActiveRecord: 13.7ms)
  [1m[35mRecipe Load (1.4ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 6 ORDER BY "recipes"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$zPRGSW6nliJ6bxccF.57hOVu9yqLQP75FO.wnJp7xsWYFZWUWDhji"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:13 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"title", "body"=>"foo", "commit_message"=>""}, "user_id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.7ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'title' AND "recipes"."user_id" = 7) LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 210.6ms (Views: 101.7ms | ActiveRecord: 2.9ms)
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$BBsWwmgRT8Z67iQCXm9F3.fX/iVAvJGzQfssofKVRepR4X/VF2lda"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 8 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = '' AND "recipes"."user_id" = 8) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 9.0ms (Views: 1.7ms | ActiveRecord: 2.5ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$G1f6DRZ1NVAk/aITleLLbulrmzegVcjjDuzYinlWfi1r4GdQHJpc2"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#create as HTML
  Parameters: {"recipe"=>{"title"=>"test title", "body"=>"foo", "commit_message"=>"first"}, "user_id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 9 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "test-title"], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["user_id", 9]]
  [1m[35mPgSearch::Document Load (0.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 12 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (1.4ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 12 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "test title foo"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["searchable_id", 12], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["body", "foo"], ["commit_message", "first"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["recipe_id", 12], ["revision", 1], ["title", "test title"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'test-title' AND "recipes"."id" != 12 AND "recipes"."user_id" = 9) LIMIT 1
  [1m[36m (1.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["action", "created"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["recipe_id", 12], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["user_id", 9]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/foo/recipes/test-title
Completed 302 Found in 48.1ms (ActiveRecord: 16.2ms)
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 9 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$xeOL5aS3Q9cKdD2Cw4Hh/uk.io5JfBwXTV.p.6e5eS2ulggEXzRou"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["username", "foo"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.5ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 10) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["user_id", 10]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["searchable_id", 13], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#update as HTML
  Parameters: {"recipe_form"=>{"title"=>"foo", "body"=>"bat", "commit_message"=>"next"}, "user_id"=>"foo", "id"=>"foo"}
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'foo' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 10 AND "recipes"."slug" = 'foo' LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.8ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 13 AND "recipes"."user_id" = 10) LIMIT 1
  [1m[36m (0.8ms)[0m  [1mUPDATE "recipes" SET "revision" = 2, "body" = 'bat', "commit_message" = 'next', "updated_at" = '2015-01-13 03:11:14.283482' WHERE "recipes"."id" = 13[0m
  [1m[35mPgSearch::Document Load (1.7ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 13 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.8ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 13 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  UPDATE "pg_search_documents" SET "content" = 'foo bat', "updated_at" = '2015-01-13 03:11:14.294949' WHERE "pg_search_documents"."id" = 13
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 10 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "events" ("action", "created_at", "recipe_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["action", "updated"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["recipe_id", 13], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["user_id", 10]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."id" != 13 AND "recipes"."user_id" = 10) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bat"], ["commit_message", "next"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["recipe_id", 13], ["revision", 2], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["user_id", 10]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 41.8ms (ActiveRecord: 13.8ms)
  [1m[35mRecipe Load (1.2ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = $1 LIMIT 1  [["id", 13]]
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$jR82H9naSw27azb2Gq1MBu.uKJRYN0DRma2FGbtcBXIh9EHxRGgsK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 11) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["user_id", 11]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 14 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.9ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 14 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["searchable_id", 14], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RecipesController#random as HTML
  [1m[36mRecipe Load (1.0ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE (forked_from_recipe_id IS NULL) ORDER BY RANDOM() LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 11 LIMIT 1
Redirected to http://test.host/foo/recipes/foo
Completed 302 Found in 5.8ms (ActiveRecord: 1.8ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."username" = 'foo' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@b.com' LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"  [["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@b.com"], ["encrypted_password", "$2a$04$NmXrw7sPxbsVRJLAMH19COyPTLNJvsxq0wuc5gqdiCR1ExWtg2HXe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["username", "foo"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."username" = 'baz' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'a@c.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "slug", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14) RETURNING "id"[0m  [["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "a@c.com"], ["encrypted_password", "$2a$04$yDHHxjtbKBaxQ876KJMN1ejE/AKlyYiG1E.LXOh7XJQpWnm.MBkCS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["slug", nil], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["username", "baz"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRecipe Exists (0.6ms)[0m  SELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 12) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["body", "bar"], ["commit_message", "foo"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["forked_from_recipe_id", nil], ["revision", nil], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["user_id", 12]]
  [1m[35mPgSearch::Document Load (0.6ms)[0m  SELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 15 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1
  [1m[36mRecipe Load (0.6ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["searchable_id", 15], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mRecipe Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "recipes" WHERE ("recipes"."slug" = 'foo' AND "recipes"."user_id" = 13) LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "recipes" ("body", "commit_message", "created_at", "forked_from_recipe_id", "revision", "slug", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["forked_from_recipe_id", 15], ["revision", 1], ["slug", "foo"], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["user_id", 13]]
  [1m[36mPgSearch::Document Load (0.7ms)[0m  [1mSELECT "pg_search_documents".* FROM "pg_search_documents" WHERE "pg_search_documents"."searchable_id" = 16 AND "pg_search_documents"."searchable_type" = 'Recipe' LIMIT 1[0m
  [1m[35mRecipe Load (0.7ms)[0m  SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 16 LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "pg_search_documents" ("content", "created_at", "searchable_id", "searchable_type", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["content", "foo bar"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["searchable_id", 16], ["searchable_type", "Recipe"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "recipe_revisions" ("body", "commit_message", "created_at", "recipe_id", "revision", "title", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["body", "bar"], ["commit_message", "Forked From foo"], ["created_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["recipe_id", 16], ["revision", 1], ["title", "foo"], ["updated_at", Tue, 13 Jan 2015 03:11:14 UTC +00:00], ["user_id", 13]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "pg_search_documents" WHERE "pg_search_documents"."id" = 15[0m
  [1m[35mActsAsTaggableOn::Tagging Load (0.9ms)[0m  SELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 15 AND "taggings"."taggable_type" = 'Recipe'
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1mSELECT "taggings".* FROM "taggings" WHERE "taggings"."taggable_id" = 15 AND "taggings"."taggable_type" = 'Recipe' AND (taggings.context = 'tags')[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "recipes" WHERE "recipes"."id" = $1  [["id", 15]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RecipesController#show as HTML
  Parameters: {"user_id"=>"baz", "id"=>"foo"}
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'baz' LIMIT 1
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."user_id" = 13 AND "recipes"."slug" = 'foo' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "recipe_revisions" WHERE "recipe_revisions"."recipe_id" = 16
  [1m[36mRecipe Load (0.7ms)[0m  [1mSELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = 15 LIMIT 1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 13 LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "recipes" WHERE "recipes"."forked_from_recipe_id" = 16[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "stars" WHERE "stars"."recipe_id" = 16
Completed 200 OK in 29.1ms (Views: 15.2ms | ActiveRecord: 5.6ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
